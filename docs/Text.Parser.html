<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Text.Parser</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Text.Parser.html" class="Module">Text.Parser</a> <a id="20" class="Keyword">where</a>

<a id="27" class="Keyword">open</a> <a id="32" class="Keyword">import</a> <a id="39" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="49" class="Symbol">as</a> <a id="52" class="Module">Bool</a> <a id="57" class="Keyword">using</a> <a id="63" class="Symbol">(</a><a id="64" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="68" class="Symbol">;</a> <a id="70" href="Data.Bool.Base.html#1565" class="Function">T</a><a id="71" class="Symbol">;</a> <a id="73" href="Data.Bool.Base.html#932" class="Function">not</a><a id="76" class="Symbol">;</a> <a id="78" href="Data.Bool.Base.html#1397" class="Function Operator">if_then_else_</a><a id="91" class="Symbol">)</a>
<a id="93" class="Keyword">open</a> <a id="98" class="Keyword">import</a> <a id="105" href="Data.Char.html" class="Module">Data.Char</a> <a id="115" class="Symbol">as</a> <a id="118" class="Module">Char</a> <a id="123" class="Keyword">using</a> <a id="129" class="Symbol">(</a><a id="130" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a><a id="134" class="Symbol">)</a>
<a id="136" class="Keyword">open</a> <a id="141" class="Keyword">import</a> <a id="148" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="159" class="Symbol">as</a> <a id="162" class="Module">Empty</a> <a id="168" class="Keyword">using</a> <a id="174" class="Symbol">(</a><a id="175" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="176" class="Symbol">)</a>
<a id="178" class="Keyword">open</a> <a id="183" class="Keyword">import</a> <a id="190" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="203" class="Symbol">as</a> <a id="206" class="Module">Int</a> <a id="210" class="Keyword">using</a> <a id="216" class="Symbol">(</a><a id="217" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a><a id="218" class="Symbol">)</a>
<a id="220" class="Keyword">open</a> <a id="225" class="Keyword">import</a> <a id="232" href="Data.List.html" class="Module">Data.List</a> <a id="242" class="Symbol">as</a> <a id="245" class="Module">List</a> <a id="250" class="Keyword">using</a> <a id="256" class="Symbol">(</a><a id="257" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="261" class="Symbol">;</a> <a id="263" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="266" class="Symbol">;</a> <a id="268" href="Data.List.Base.html#9981" class="InductiveConstructor">[]</a><a id="270" class="Symbol">)</a>
<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="303" class="Symbol">as</a> <a id="306" class="Module">List⁺</a> <a id="312" class="Keyword">using</a> <a id="318" class="Symbol">(</a><a id="319" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a><a id="324" class="Symbol">)</a>
<a id="326" class="Keyword">import</a> <a id="333" href="Data.List.Categorical.html" class="Module">Data.List.Categorical</a> <a id="355" class="Symbol">as</a> <a id="358" class="Module">ListCat</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Data.List.Sized.Interface.html" class="Module">Data.List.Sized.Interface</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="427" class="Symbol">as</a> <a id="430" class="Module">Maybe</a> <a id="436" class="Keyword">using</a> <a id="442" class="Symbol">(</a><a id="443" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a><a id="448" class="Symbol">;</a> <a id="450" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a><a id="454" class="Symbol">;</a> <a id="456" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a><a id="463" class="Symbol">)</a>
<a id="465" class="Keyword">import</a> <a id="472" href="Data.Maybe.Categorical.html" class="Module">Data.Maybe.Categorical</a> <a id="495" class="Symbol">as</a> <a id="498" class="Module">MaybeCat</a>
<a id="507" class="Keyword">open</a> <a id="512" class="Keyword">import</a> <a id="519" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="528" class="Symbol">as</a> <a id="531" class="Module">Nat</a> <a id="535" class="Keyword">using</a> <a id="541" class="Symbol">(</a><a id="542" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="543" class="Symbol">)</a>
<a id="545" class="Keyword">import</a> <a id="552" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="572" class="Symbol">as</a> <a id="575" class="Module">Nat</a>
<a id="579" class="Keyword">open</a> <a id="584" class="Keyword">import</a> <a id="591" href="Data.Product.html" class="Module">Data.Product</a> <a id="604" class="Symbol">as</a> <a id="607" class="Module">Prod</a> <a id="612" class="Keyword">using</a> <a id="618" class="Symbol">(</a><a id="619" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="622" class="Symbol">;</a> <a id="624" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="627" class="Symbol">)</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Data.String.html" class="Module">Data.String</a> <a id="653" class="Symbol">as</a> <a id="656" class="Module">String</a> <a id="663" class="Keyword">using</a> <a id="669" class="Symbol">(</a><a id="670" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="676" class="Symbol">)</a>
<a id="678" class="Keyword">open</a> <a id="683" class="Keyword">import</a> <a id="690" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="699" class="Symbol">as</a> <a id="702" class="Module">Sum</a> <a id="706" class="Keyword">using</a> <a id="712" class="Symbol">(</a><a id="713" href="Data.Sum.Base.html#728" class="Datatype Operator">_⊎_</a><a id="716" class="Symbol">;</a> <a id="718" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a><a id="722" class="Symbol">;</a> <a id="724" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a><a id="728" class="Symbol">)</a>
<a id="730" class="Keyword">open</a> <a id="735" class="Keyword">import</a> <a id="742" href="Data.Subset.html" class="Module">Data.Subset</a> <a id="754" class="Comment">-- instances</a>
<a id="767" class="Keyword">open</a> <a id="772" class="Keyword">import</a> <a id="779" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="789" class="Symbol">as</a> <a id="792" class="Module">Unit</a> <a id="797" class="Keyword">using</a> <a id="803" class="Symbol">(</a><a id="804" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="805" class="Symbol">;</a> <a id="807" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="809" class="Symbol">)</a>
<a id="811" class="Keyword">open</a> <a id="816" class="Keyword">import</a> <a id="823" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="832" class="Symbol">as</a> <a id="835" class="Module">Vec</a> <a id="839" class="Keyword">using</a> <a id="845" class="Symbol">(</a><a id="846" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="849" class="Symbol">)</a>
<a id="851" class="Keyword">open</a> <a id="856" class="Keyword">import</a> <a id="863" href="Function.html" class="Module">Function</a> <a id="872" class="Keyword">using</a> <a id="878" class="Symbol">(</a><a id="879" href="Function.Base.html#615" class="Function">id</a><a id="881" class="Symbol">;</a> <a id="883" href="Function.Base.html#636" class="Function">const</a><a id="888" class="Symbol">;</a> <a id="890" href="Function.Base.html#992" class="Function Operator">_∘_</a><a id="893" class="Symbol">;</a> <a id="895" href="Function.Base.html#1577" class="Function Operator">_$_</a><a id="898" class="Symbol">;</a> <a id="900" href="Function.Base.html#3709" class="Function Operator">case_of_</a><a id="908" class="Symbol">)</a>
<a id="910" class="Keyword">open</a> <a id="915" class="Keyword">import</a> <a id="922" href="Induction.Nat.Strong.html" class="Module">Induction.Nat.Strong</a> <a id="943" class="Keyword">using</a> <a id="949" class="Symbol">(</a><a id="950" href="Induction.Nat.Strong.html#197" class="Record Operator">□_</a><a id="952" class="Symbol">)</a> <a id="954" class="Keyword">public</a>
<a id="961" class="Keyword">open</a> <a id="966" class="Keyword">import</a> <a id="973" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="990" class="Keyword">using</a> <a id="996" class="Symbol">(</a><a id="997" href="Relation.Nullary.html#1508" class="Record">Dec</a><a id="1000" class="Symbol">;</a> <a id="1002" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="1005" class="Symbol">;</a> <a id="1007" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="1009" class="Symbol">)</a>
<a id="1011" class="Keyword">open</a> <a id="1016" class="Keyword">import</a> <a id="1023" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="1050" class="Keyword">using</a> <a id="1056" class="Symbol">(</a><a id="1057" href="Relation.Nullary.Decidable.Core.html#1365" class="Function">True</a><a id="1061" class="Symbol">;</a> <a id="1063" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌊_⌋</a><a id="1066" class="Symbol">)</a>
<a id="1068" class="Keyword">open</a> <a id="1073" class="Keyword">import</a> <a id="1080" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="1095" class="Keyword">using</a> <a id="1101" class="Symbol">(</a><a id="1102" href="Relation.Unary.html#3359" class="Function">IUniversal</a><a id="1112" class="Symbol">;</a> <a id="1114" href="Relation.Unary.html#4338" class="Function Operator">_⇒_</a><a id="1117" class="Symbol">)</a> <a id="1119" class="Keyword">public</a> <a id="1126" class="Comment">-- imports ∀[_] syntax</a>
<a id="1149" class="Keyword">open</a> <a id="1154" class="Keyword">import</a> <a id="1161" href="Relation.Binary.PropositionalEquality.Decidable.html" class="Module">Relation.Binary.PropositionalEquality.Decidable</a> <a id="1209" class="Comment">--instances</a>

<a id="1222" class="Keyword">open</a> <a id="1227" class="Keyword">import</a> <a id="1234" href="Data.Subset.html" class="Module">Data.Subset</a> <a id="1246" class="Keyword">public</a>

<a id="1254" class="Keyword">import</a> <a id="1261" href="Text.Parser.Monad.html" class="Module">Text.Parser.Monad</a> <a id="1279" class="Symbol">as</a> <a id="1282" class="Module">PM</a>
<a id="1285" class="Keyword">import</a> <a id="1292" href="Text.Parser.Types.html" class="Module">Text.Parser.Types</a> <a id="1310" class="Symbol">as</a> <a id="1313" class="Module">PI</a>
<a id="1316" class="Keyword">import</a> <a id="1323" href="Text.Parser.Position.html" class="Module">Text.Parser.Position</a> <a id="1344" class="Symbol">as</a> <a id="1347" class="Module">PP</a>


<a id="1352" class="Keyword">data</a> <a id="ErrorMsg"></a><a id="1357" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a> <a id="1366" class="Symbol">:</a> <a id="1368" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1372" class="Keyword">where</a>
  <a id="ErrorMsg.no-parse"></a><a id="1380" href="Text.Parser.html#1380" class="InductiveConstructor">no-parse</a>        <a id="1396" class="Symbol">:</a> <a id="1398" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a>
  <a id="ErrorMsg.ambiguous-parse"></a><a id="1409" href="Text.Parser.html#1409" class="InductiveConstructor">ambiguous-parse</a> <a id="1425" class="Symbol">:</a> <a id="1427" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a>

<a id="1437" class="Keyword">data</a> <a id="Error"></a><a id="1442" href="Text.Parser.html#1442" class="Datatype">Error</a> <a id="1448" class="Symbol">:</a> <a id="1450" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a> <a id="1459" class="Symbol">→</a> <a id="1461" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1465" class="Keyword">where</a>


<a id="1473" class="Keyword">private</a>
  <a id="1483" class="Keyword">variable</a>
    <a id="1496" href="Text.Parser.html#1496" class="Generalizable">n</a> <a id="1498" class="Symbol">:</a> <a id="1500" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="1506" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="1508" href="Text.Parser.html#1508" class="Generalizable">B</a> <a id="1510" href="Text.Parser.html#1510" class="Generalizable">C</a> <a id="1512" class="Symbol">:</a> <a id="1514" href="Agda.Primitive.html#326" class="Primitive">Set</a>


<a id="1520" class="Keyword">private</a>
  <a id="1530" class="Comment">-- |The success type, specialised to strings.</a>
  <a id="Success"></a><a id="1578" href="Text.Parser.html#1578" class="Function">Success</a> <a id="1586" class="Symbol">:</a> <a id="1588" class="Symbol">(</a><a id="1589" href="Text.Parser.html#1589" class="Bound">A</a> <a id="1591" class="Symbol">:</a> <a id="1593" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1596" class="Symbol">)</a> <a id="1598" class="Symbol">(</a><a id="1599" href="Text.Parser.html#1599" class="Bound">n</a> <a id="1601" class="Symbol">:</a> <a id="1603" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="1604" class="Symbol">)</a> <a id="1606" class="Symbol">→</a> <a id="1608" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="1614" href="Text.Parser.html#1578" class="Function">Success</a> <a id="1622" href="Text.Parser.html#1622" class="Bound">A</a> <a id="1624" href="Text.Parser.html#1624" class="Bound">n</a> <a id="1626" class="Symbol">=</a> <a id="1628" href="Text.Parser.Types.html#838" class="Record">PI.Success</a> <a id="1639" class="Symbol">(</a><a id="1640" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="1644" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a><a id="1648" class="Symbol">)</a> <a id="1650" href="Text.Parser.html#1622" class="Bound">A</a> <a id="1652" href="Text.Parser.html#1624" class="Bound">n</a>

  <a id="1657" class="Comment">-- |Check if a Success were, in fact, a success.</a>
  <a id="runSuccess"></a><a id="1708" href="Text.Parser.html#1708" class="Function">runSuccess</a> <a id="1719" class="Symbol">:</a> <a id="1721" href="Text.Parser.html#1578" class="Function">Success</a> <a id="1729" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="1731" href="Text.Parser.html#1496" class="Generalizable">n</a> <a id="1733" class="Symbol">→</a> <a id="1735" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="1741" href="Text.Parser.html#1506" class="Generalizable">A</a>
  <a id="1745" href="Text.Parser.html#1708" class="Function">runSuccess</a> <a id="1756" href="Text.Parser.html#1756" class="Bound">s</a> <a id="1758" class="Symbol">=</a>
    <a id="1764" href="Data.Bool.Base.html#1397" class="Function Operator">if</a> <a id="1767" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌊</a> <a id="1769" href="Text.Parser.Types.html#944" class="Field">PI.Success.size</a> <a id="1785" href="Text.Parser.html#1756" class="Bound">s</a> <a id="1787" href="Data.Nat.Properties.html#2252" class="Function Operator">Nat.≟</a> <a id="1793" class="Number">0</a> <a id="1795" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌋</a> <a id="1797" href="Data.Bool.Base.html#1397" class="Function Operator">then</a> <a id="1802" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="1807" class="Symbol">(</a><a id="1808" href="Text.Parser.Types.html#925" class="Field">PI.Success.value</a> <a id="1825" href="Text.Parser.html#1756" class="Bound">s</a><a id="1826" class="Symbol">)</a> <a id="1828" href="Data.Bool.Base.html#1397" class="Function Operator">else</a> <a id="1833" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>


<a id="1843" class="Keyword">private</a>
  <a id="1853" class="Comment">-- |The result type, specialised to carry no error information or annotations.</a>
  <a id="Result"></a><a id="1934" href="Text.Parser.html#1934" class="Function">Result</a> <a id="1941" class="Symbol">:</a> <a id="1943" class="Symbol">(</a><a id="1944" href="Text.Parser.html#1944" class="Bound">A</a> <a id="1946" class="Symbol">:</a> <a id="1948" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1951" class="Symbol">)</a> <a id="1953" class="Symbol">→</a> <a id="1955" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="1961" href="Text.Parser.html#1934" class="Function">Result</a> <a id="1968" href="Text.Parser.html#1968" class="Bound">A</a> <a id="1970" class="Symbol">=</a> <a id="1972" href="Text.Parser.Monad.html#678" class="Datatype">PM.Result</a> <a id="1982" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Text.Parser.html#1968" class="Bound">A</a> <a id="1987" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1989" href="Text.Parser.Position.html#310" class="Record">PP.Position</a> <a id="2001" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2003" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2008" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="2009" class="Symbol">)</a>

  <a id="2014" class="Comment">-- |Discard errors, and return only the results.</a>
  <a id="runResult"></a><a id="2065" href="Text.Parser.html#2065" class="Function">runResult</a> <a id="2075" class="Symbol">:</a> <a id="2077" href="Text.Parser.html#1934" class="Function">Result</a> <a id="2084" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="2086" class="Symbol">→</a> <a id="2088" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2093" href="Text.Parser.html#1506" class="Generalizable">A</a>
  <a id="2097" href="Text.Parser.html#2065" class="Function">runResult</a> <a id="2107" class="Symbol">=</a> <a id="2109" href="Text.Parser.Monad.html#802" class="Function">PM.result</a> <a id="2119" class="Symbol">(</a><a id="2120" href="Function.Base.html#636" class="Function">const</a> <a id="2126" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2128" class="Symbol">)</a> <a id="2130" class="Symbol">(</a><a id="2131" href="Function.Base.html#636" class="Function">const</a> <a id="2137" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2139" class="Symbol">)</a> <a id="2141" class="Symbol">((</a><a id="2143" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷</a> <a id="2146" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2148" class="Symbol">)</a> <a id="2150" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2152" href="Agda.Builtin.Sigma.html#252" class="Field">Prod.proj₁</a><a id="2162" class="Symbol">)</a>

<a id="2165" class="Keyword">private</a>
  <a id="fromSingleton"></a><a id="2175" href="Text.Parser.html#2175" class="Function">fromSingleton</a> <a id="2189" class="Symbol">:</a> <a id="2191" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2196" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="2198" class="Symbol">→</a> <a id="2200" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a> <a id="2209" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="2211" href="Text.Parser.html#1506" class="Generalizable">A</a>
  <a id="2215" href="Text.Parser.html#2175" class="Function">fromSingleton</a> <a id="2229" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>          <a id="2241" class="Symbol">=</a> <a id="2243" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="2248" href="Text.Parser.html#1380" class="InductiveConstructor">no-parse</a>
  <a id="2259" href="Text.Parser.html#2175" class="Function">fromSingleton</a> <a id="2273" class="Symbol">(</a><a id="2274" href="Text.Parser.html#2274" class="Bound">v</a> <a id="2276" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2278" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2280" class="Symbol">)</a>    <a id="2285" class="Symbol">=</a> <a id="2287" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="2292" href="Text.Parser.html#2274" class="Bound">v</a>
  <a id="2296" href="Text.Parser.html#2175" class="Function">fromSingleton</a> <a id="2310" class="Symbol">(_</a> <a id="2313" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2315" class="Symbol">_</a> <a id="2317" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2319" class="Symbol">_)</a> <a id="2322" class="Symbol">=</a> <a id="2324" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="2329" href="Text.Parser.html#1409" class="InductiveConstructor">ambiguous-parse</a>


<a id="2347" class="Comment">-- |The parser type, specialised to strings.</a>
<a id="Parser"></a><a id="2392" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="2399" class="Symbol">:</a> <a id="2401" class="Symbol">(</a><a id="2402" href="Text.Parser.html#2402" class="Bound">A</a> <a id="2404" class="Symbol">:</a> <a id="2406" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="2409" class="Symbol">)</a> <a id="2411" class="Symbol">(</a><a id="2412" href="Text.Parser.html#2412" class="Bound">n</a> <a id="2414" class="Symbol">:</a> <a id="2416" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="2417" class="Symbol">)</a> <a id="2419" class="Symbol">→</a> <a id="2421" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="2425" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="2432" class="Symbol">=</a> <a id="2434" href="Text.Parser.Types.html#1195" class="Record">PI.Parser</a> <a id="2444" href="Text.Parser.Monad.html#3898" class="Function">PM.Agdarsec′.chars</a>

<a id="2464" class="Comment">-- |Run a parser, and return a list of results.</a>
<a id="runParser"></a><a id="2512" href="Text.Parser.html#2512" class="Function">runParser</a> <a id="2522" class="Symbol">:</a> <a id="2524" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="2527" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="2534" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="2536" href="Relation.Unary.html#3359" class="Function">]</a> <a id="2538" class="Symbol">→</a> <a id="2540" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="2547" class="Symbol">→</a> <a id="2549" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a> <a id="2558" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="2560" href="Text.Parser.html#1506" class="Generalizable">A</a>
<a id="2562" href="Text.Parser.html#2512" class="Function">runParser</a> <a id="2572" class="Symbol">{</a><a id="2573" href="Text.Parser.html#2573" class="Bound">A</a><a id="2574" class="Symbol">}</a> <a id="2576" href="Text.Parser.html#2576" class="Bound">p</a> <a id="2578" href="Text.Parser.html#2578" class="Bound">str</a>

  <a id="2585" class="Comment">-- Return the single parse, or an error:</a>
  <a id="2628" class="Symbol">=</a> <a id="2630" href="Text.Parser.html#2175" class="Function">fromSingleton</a>

  <a id="2647" class="Comment">-- Discard all &quot;successful&quot; parses which didn&#39;t consume all input:</a>
  <a id="2716" href="Function.Base.html#1577" class="Function Operator">$</a> <a id="2718" href="Data.Maybe.Base.html#1362" class="Function">Maybe.maybe</a> <a id="2730" href="Function.Base.html#615" class="Function">id</a> <a id="2733" class="InductiveConstructor">[]</a> <a id="2736" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2738" href="Text.Parser.html#3083" class="Function">mapM</a> <a id="2743" href="Text.Parser.html#1708" class="Function">runSuccess</a>

  <a id="2757" class="Comment">-- Discard all errors, and return only the &quot;successful&quot; parses:</a>
  <a id="2823" href="Function.Base.html#1577" class="Function Operator">$</a> <a id="2825" href="Text.Parser.html#2065" class="Function">runResult</a>

  <a id="2838" class="Comment">-- Run the parser:</a>
  <a id="2859" href="Function.Base.html#1577" class="Function Operator">$</a> <a id="2861" class="Symbol">(λ</a> <a id="2864" href="Text.Parser.html#2864" class="Bound">input</a> <a id="2870" class="Symbol">-&gt;</a> <a id="2873" href="Text.Parser.Types.html#1300" class="Field">PI.runParser</a> <a id="2886" href="Text.Parser.html#2576" class="Bound">p</a> <a id="2888" class="Symbol">(</a><a id="2889" href="Data.Nat.Properties.html#6249" class="Function">Nat.n≤1+n</a> <a id="2899" class="Symbol">_)</a> <a id="2902" href="Text.Parser.html#2864" class="Bound">input</a> <a id="2908" class="Symbol">(</a><a id="2909" href="Text.Parser.Position.html#409" class="Function">PP.start</a> <a id="2918" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2920" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2922" class="Symbol">))</a>

  <a id="2928" class="Comment">-- Convert the input from a String to a length-indexed Vector:</a>
  <a id="2993" href="Function.Base.html#1577" class="Function Operator">$</a> <a id="2995" href="Data.Vec.Base.html#7501" class="Function">Vec.fromList</a> <a id="3008" class="Symbol">(</a><a id="3009" href="Data.String.Base.html#1513" class="Primitive">String.toList</a> <a id="3023" href="Text.Parser.html#2578" class="Bound">str</a><a id="3026" class="Symbol">)</a>
  <a id="3030" class="Keyword">where</a>
    <a id="3040" class="Comment">-- Import mapM instance for List/Maybe</a>
    <a id="3083" href="Text.Parser.html#3083" class="Function">mapM</a> <a id="3088" class="Symbol">:</a> <a id="3090" class="Symbol">∀</a> <a id="3092" class="Symbol">{</a><a id="3093" href="Text.Parser.html#3093" class="Bound">A</a> <a id="3095" href="Text.Parser.html#3095" class="Bound">B</a><a id="3096" class="Symbol">}</a> <a id="3098" class="Symbol">→</a> <a id="3100" class="Symbol">(</a><a id="3101" href="Text.Parser.html#3093" class="Bound">A</a> <a id="3103" class="Symbol">→</a> <a id="3105" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3111" href="Text.Parser.html#3095" class="Bound">B</a><a id="3112" class="Symbol">)</a> <a id="3114" class="Symbol">→</a> <a id="3116" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3121" href="Text.Parser.html#3093" class="Bound">A</a> <a id="3123" class="Symbol">→</a> <a id="3125" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3131" class="Symbol">(</a><a id="3132" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3137" href="Text.Parser.html#3095" class="Bound">B</a><a id="3138" class="Symbol">)</a>
    <a id="3144" href="Text.Parser.html#3083" class="Function">mapM</a> <a id="3149" class="Symbol">=</a> <a id="3151" href="Data.List.Categorical.html#2312" class="Function">ListCat.TraversableM.mapM</a> <a id="3177" href="Data.Maybe.Categorical.html#1423" class="Function">MaybeCat.monad</a>



<a id="3195" class="Comment">---------------------------------------------------------------</a>
<a id="3259" class="Comment">-- Export the basic parser combinators with simplified types --</a>
<a id="3323" class="Comment">---------------------------------------------------------------</a>

<a id="3388" class="Keyword">import</a> <a id="3395" href="Text.Parser.Combinators.html" class="Module">Text.Parser.Combinators</a> <a id="3419" class="Symbol">as</a> <a id="3422" class="Module">PC</a>
<a id="3425" class="Keyword">import</a> <a id="3432" href="Text.Parser.Combinators.Char.html" class="Module">Text.Parser.Combinators.Char</a> <a id="3461" class="Symbol">as</a> <a id="3464" class="Module">PCC</a>
<a id="3468" class="Keyword">import</a> <a id="3475" href="Text.Parser.Combinators.Numbers.html" class="Module">Text.Parser.Combinators.Numbers</a> <a id="3507" class="Symbol">as</a> <a id="3510" class="Module">PCN</a>


<a id="3516" class="Keyword">private</a>
  <a id="3526" class="Keyword">instance</a>
    <a id="Agdarsec′M"></a><a id="3539" href="Text.Parser.html#3539" class="Function">Agdarsec′M</a>  <a id="3551" class="Symbol">=</a> <a id="3553" href="Text.Parser.Monad.html#4105" class="Function">PM.Agdarsec′.monad</a>
    <a id="Agdarsec′M0"></a><a id="3576" href="Text.Parser.html#3576" class="Function">Agdarsec′M0</a> <a id="3588" class="Symbol">=</a> <a id="3590" href="Text.Parser.Monad.html#2343" class="Function">PM.Agdarsec′.monadZero</a>
    <a id="Agdarsec′M+"></a><a id="3617" href="Text.Parser.html#3617" class="Function">Agdarsec′M+</a> <a id="3629" class="Symbol">=</a> <a id="3631" href="Text.Parser.Monad.html#2725" class="Function">PM.Agdarsec′.monadPlus</a>

<a id="3655" class="Comment">-- |Parser which...</a>
<a id="box"></a><a id="3675" href="Text.Parser.html#3675" class="Function">box</a> <a id="3679" class="Symbol">:</a> <a id="3681" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="3684" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3691" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3693" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="3695" href="Induction.Nat.Strong.html#197" class="Record Operator">□</a> <a id="3697" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3704" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3706" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="3708" href="Text.Parser.html#3675" class="Function">box</a> <a id="3712" class="Symbol">=</a> <a id="3714" href="Text.Parser.Combinators.html#2070" class="Function">PC.box</a>

<a id="3722" class="Comment">-- |Parser which...</a>
<a id="fail"></a><a id="3742" href="Text.Parser.html#3742" class="Function">fail</a> <a id="3747" class="Symbol">:</a> <a id="3749" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="3752" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3759" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3761" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="3763" href="Text.Parser.html#3742" class="Function">fail</a> <a id="3768" class="Symbol">=</a> <a id="3770" href="Text.Parser.Combinators.html#2134" class="Function">PC.fail</a>

<a id="3779" class="Keyword">infixr</a> <a id="3786" class="Number">3</a> <a id="3788" href="Text.Parser.html#3815" class="Function Operator">_&lt;|&gt;_</a>

<a id="3795" class="Comment">-- |Parser which...</a>
<a id="_&lt;|&gt;_"></a><a id="3815" href="Text.Parser.html#3815" class="Function Operator">_&lt;|&gt;_</a> <a id="3821" class="Symbol">:</a> <a id="3823" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="3826" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3833" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3835" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="3837" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3844" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3846" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="3848" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3855" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3857" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="3859" href="Text.Parser.html#3815" class="Function Operator">_&lt;|&gt;_</a> <a id="3865" class="Symbol">=</a> <a id="3867" href="Text.Parser.Combinators.html#2204" class="Function Operator">PC._&lt;|&gt;_</a>

<a id="3877" class="Keyword">infixr</a> <a id="3884" class="Number">5</a> <a id="3886" href="Text.Parser.html#3913" class="Function Operator">_&lt;$&gt;_</a>

<a id="3893" class="Comment">-- |Parser which...</a>
<a id="_&lt;$&gt;_"></a><a id="3913" href="Text.Parser.html#3913" class="Function Operator">_&lt;$&gt;_</a> <a id="3919" class="Symbol">:</a> <a id="3921" class="Symbol">(</a><a id="3922" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3924" class="Symbol">→</a> <a id="3926" href="Text.Parser.html#1508" class="Generalizable">B</a><a id="3927" class="Symbol">)</a> <a id="3929" class="Symbol">→</a> <a id="3931" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="3934" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3941" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="3943" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="3945" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="3952" href="Text.Parser.html#1508" class="Generalizable">B</a> <a id="3954" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="3956" href="Text.Parser.html#3913" class="Function Operator">_&lt;$&gt;_</a> <a id="3962" class="Symbol">=</a> <a id="3964" href="Text.Parser.Combinators.html#2377" class="Function Operator">PC._&lt;$&gt;_</a>

<a id="3974" class="Keyword">infixr</a> <a id="3981" class="Number">5</a> <a id="3983" href="Text.Parser.html#4009" class="Function Operator">_&lt;$_</a>

<a id="3989" class="Comment">-- |Parser which...</a>
<a id="_&lt;$_"></a><a id="4009" href="Text.Parser.html#4009" class="Function Operator">_&lt;$_</a> <a id="4014" class="Symbol">:</a> <a id="4016" href="Text.Parser.html#1508" class="Generalizable">B</a> <a id="4018" class="Symbol">→</a> <a id="4020" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4023" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4030" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4032" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="4034" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4041" href="Text.Parser.html#1508" class="Generalizable">B</a> <a id="4043" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4045" href="Text.Parser.html#4009" class="Function Operator">_&lt;$_</a> <a id="4050" class="Symbol">=</a> <a id="4052" href="Text.Parser.Combinators.html#2505" class="Function Operator">PC._&lt;$_</a>

<a id="4061" class="Keyword">infixl</a> <a id="4068" class="Number">4</a> <a id="4070" href="Text.Parser.html#4097" class="Function Operator">_&lt;*&gt;_</a>

<a id="4077" class="Comment">-- |Parser which...</a>
<a id="_&lt;*&gt;_"></a><a id="4097" href="Text.Parser.html#4097" class="Function Operator">_&lt;*&gt;_</a> <a id="4103" class="Symbol">:</a> <a id="4105" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4108" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4115" class="Symbol">(</a><a id="4116" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4118" class="Symbol">→</a> <a id="4120" href="Text.Parser.html#1508" class="Generalizable">B</a><a id="4121" class="Symbol">)</a> <a id="4123" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="4125" href="Induction.Nat.Strong.html#197" class="Record Operator">□</a> <a id="4127" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4134" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4136" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="4138" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4145" href="Text.Parser.html#1508" class="Generalizable">B</a> <a id="4147" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4149" href="Text.Parser.html#4097" class="Function Operator">_&lt;*&gt;_</a> <a id="4155" class="Symbol">=</a> <a id="4157" href="Text.Parser.Combinators.html#4177" class="Function Operator">PC._&lt;*&gt;_</a>

<a id="4167" class="Comment">-- |Parser which...</a>
<a id="char"></a><a id="4187" href="Text.Parser.html#4187" class="Function">char</a> <a id="4192" class="Symbol">:</a> <a id="4194" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4199" class="Symbol">→</a> <a id="4201" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4204" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4211" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4216" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4218" href="Text.Parser.html#4187" class="Function">char</a> <a id="4223" class="Symbol">=</a> <a id="4225" href="Text.Parser.Combinators.Char.html#894" class="Function">PCC.char</a>

<a id="4235" class="Comment">-- |Parser which...</a>
<a id="anyCharBut"></a><a id="4255" href="Text.Parser.html#4255" class="Function">anyCharBut</a> <a id="4266" class="Symbol">:</a> <a id="4268" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4273" class="Symbol">→</a> <a id="4275" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4278" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4285" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4290" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4292" href="Text.Parser.html#4255" class="Function">anyCharBut</a> <a id="4303" class="Symbol">=</a> <a id="4305" href="Text.Parser.Combinators.Char.html#951" class="Function">PCC.anyCharBut</a>

<a id="4321" class="Comment">-- |Parser which...</a>
<a id="space"></a><a id="4341" href="Text.Parser.html#4341" class="Function">space</a> <a id="4347" class="Symbol">:</a> <a id="4349" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4352" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4359" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4364" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4366" href="Text.Parser.html#4341" class="Function">space</a> <a id="4372" class="Symbol">=</a> <a id="4374" href="Text.Parser.Combinators.Char.html#1027" class="Function">PCC.space</a>

<a id="4385" class="Comment">-- |Parser which...</a>
<a id="spaces"></a><a id="4405" href="Text.Parser.html#4405" class="Function">spaces</a> <a id="4412" class="Symbol">:</a> <a id="4414" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4417" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4424" class="Symbol">(</a><a id="4425" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="4431" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a><a id="4435" class="Symbol">)</a> <a id="4437" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4439" href="Text.Parser.html#4405" class="Function">spaces</a> <a id="4446" class="Symbol">=</a> <a id="4448" href="Text.Parser.Combinators.Char.html#1113" class="Function">PCC.spaces</a>

<a id="4460" class="Comment">-- |Helper function which checks if a string is empty.</a>
<a id="isEmpty"></a><a id="4515" href="Text.Parser.html#4515" class="Function">isEmpty</a> <a id="4523" class="Symbol">:</a> <a id="4525" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="4532" class="Symbol">→</a> <a id="4534" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="4539" href="Text.Parser.html#4515" class="Function">isEmpty</a> <a id="4547" class="Symbol">=</a> <a id="4549" href="Data.List.Base.html#4236" class="Function">List.null</a> <a id="4559" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="4561" href="Data.String.Base.html#1513" class="Primitive">String.toList</a>

<a id="4576" class="Comment">-- |Parser which...</a>
<a id="text"></a><a id="4596" href="Text.Parser.html#4596" class="Function">text</a> <a id="4601" class="Symbol">:</a> <a id="4603" class="Symbol">(</a><a id="4604" href="Text.Parser.html#4604" class="Bound">str</a> <a id="4608" class="Symbol">:</a> <a id="4610" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="4616" class="Symbol">)</a> <a id="4618" class="Symbol">{</a><a id="4619" href="Text.Parser.html#4619" class="Bound">p</a> <a id="4621" class="Symbol">:</a> <a id="4623" href="Data.Bool.Base.html#1565" class="Function">T</a> <a id="4625" class="Symbol">(</a><a id="4626" href="Data.Bool.Base.html#932" class="Function">not</a> <a id="4630" class="Symbol">(</a><a id="4631" href="Text.Parser.html#4515" class="Function">isEmpty</a> <a id="4639" href="Text.Parser.html#4604" class="Bound">str</a><a id="4642" class="Symbol">))}</a> <a id="4646" class="Symbol">→</a> <a id="4648" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4651" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4658" class="Symbol">(</a><a id="4659" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="4665" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a><a id="4669" class="Symbol">)</a> <a id="4671" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4673" href="Text.Parser.html#4596" class="Function">text</a> <a id="4678" class="Symbol">=</a> <a id="4680" href="Text.Parser.Combinators.Char.html#1172" class="Function">PCC.text</a>

<a id="4690" class="Comment">-- |Parser which...</a>
<a id="parens"></a><a id="4710" href="Text.Parser.html#4710" class="Function">parens</a> <a id="4717" class="Symbol">:</a> <a id="4719" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4722" href="Induction.Nat.Strong.html#197" class="Record Operator">□</a> <a id="4724" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4731" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4733" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="4735" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4742" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4744" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4746" href="Text.Parser.html#4710" class="Function">parens</a> <a id="4753" class="Symbol">=</a> <a id="4755" href="Text.Parser.Combinators.Char.html#1413" class="Function">PCC.parens</a>

<a id="4767" class="Comment">-- |Parser which...</a>
<a id="withSpaces"></a><a id="4787" href="Text.Parser.html#4787" class="Function">withSpaces</a> <a id="4798" class="Symbol">:</a> <a id="4800" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4803" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4810" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4812" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="4814" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4821" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="4823" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4825" href="Text.Parser.html#4787" class="Function">withSpaces</a> <a id="4836" class="Symbol">=</a> <a id="4838" href="Text.Parser.Combinators.Char.html#1594" class="Function">PCC.withSpaces</a>

<a id="4854" class="Comment">-- |Parser which...</a>
<a id="lower"></a><a id="4874" href="Text.Parser.html#4874" class="Function">lower</a> <a id="4880" class="Symbol">:</a> <a id="4882" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4885" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4892" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4897" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4899" href="Text.Parser.html#4874" class="Function">lower</a> <a id="4905" class="Symbol">=</a> <a id="4907" href="Text.Parser.Combinators.Char.html#1683" class="Function">PCC.lowerAlpha</a>

<a id="4923" class="Comment">-- |Parser which...</a>
<a id="upper"></a><a id="4943" href="Text.Parser.html#4943" class="Function">upper</a> <a id="4949" class="Symbol">:</a> <a id="4951" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4954" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="4961" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="4966" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="4968" href="Text.Parser.html#4943" class="Function">upper</a> <a id="4974" class="Symbol">=</a> <a id="4976" href="Text.Parser.Combinators.Char.html#1825" class="Function">PCC.upperAlpha</a>

<a id="4992" class="Comment">-- |Parser which...</a>
<a id="alpha"></a><a id="5012" href="Text.Parser.html#5012" class="Function">alpha</a> <a id="5018" class="Symbol">:</a> <a id="5020" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5023" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5030" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="5035" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5037" href="Text.Parser.html#5012" class="Function">alpha</a> <a id="5043" class="Symbol">=</a> <a id="5045" href="Text.Parser.Combinators.Char.html#1967" class="Function">PCC.alpha</a>

<a id="5056" class="Comment">-- |Parser which...</a>
<a id="alphas⁺"></a><a id="5076" href="Text.Parser.html#5076" class="Function">alphas⁺</a> <a id="5084" class="Symbol">:</a> <a id="5086" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5089" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5096" class="Symbol">(</a><a id="5097" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="5103" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a><a id="5107" class="Symbol">)</a> <a id="5109" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5111" href="Text.Parser.html#5076" class="Function">alphas⁺</a> <a id="5119" class="Symbol">=</a> <a id="5121" href="Text.Parser.Combinators.Char.html#2030" class="Function">PCC.alphas⁺</a>

<a id="5134" class="Comment">-- |Parser which...</a>
<a id="num"></a><a id="5154" href="Text.Parser.html#5154" class="Function">num</a> <a id="5158" class="Symbol">:</a> <a id="5160" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5163" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5170" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="5172" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5174" href="Text.Parser.html#5154" class="Function">num</a> <a id="5178" class="Symbol">=</a> <a id="5180" href="Text.Parser.Combinators.Char.html#2091" class="Function">PCC.num</a>

<a id="5189" class="Comment">-- |Parser which...</a>
<a id="alphanum"></a><a id="5209" href="Text.Parser.html#5209" class="Function">alphanum</a> <a id="5218" class="Symbol">:</a> <a id="5220" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5223" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5230" class="Symbol">(</a><a id="5231" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="5236" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="5238" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="5239" class="Symbol">)</a> <a id="5241" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5243" href="Text.Parser.html#5209" class="Function">alphanum</a> <a id="5252" class="Symbol">=</a> <a id="5254" href="Text.Parser.Combinators.Char.html#2135" class="Function">PCC.alphanum</a>

<a id="5268" class="Comment">-- |Parser which...</a>
<a id="decimalDigit"></a><a id="5288" href="Text.Parser.html#5288" class="Function">decimalDigit</a> <a id="5301" class="Symbol">:</a> <a id="5303" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5306" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5313" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="5315" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5317" href="Text.Parser.html#5288" class="Function">decimalDigit</a> <a id="5330" class="Symbol">=</a> <a id="5332" href="Text.Parser.Combinators.Numbers.html#930" class="Function">PCN.decimalDigit</a>

<a id="5350" class="Comment">-- |Parser which...</a>
<a id="decimalℕ"></a><a id="5370" href="Text.Parser.html#5370" class="Function">decimalℕ</a> <a id="5379" class="Symbol">:</a> <a id="5381" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5384" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5391" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="5393" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5395" href="Text.Parser.html#5370" class="Function">decimalℕ</a> <a id="5404" class="Symbol">=</a> <a id="5406" href="Text.Parser.Combinators.Numbers.html#1190" class="Function">PCN.decimalℕ</a>

<a id="5420" class="Comment">-- |Parser which...</a>
<a id="decimalℤ"></a><a id="5440" href="Text.Parser.html#5440" class="Function">decimalℤ</a> <a id="5449" class="Symbol">:</a> <a id="5451" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5454" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5461" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="5463" href="Relation.Unary.html#3359" class="Function">]</a>
<a id="5465" href="Text.Parser.html#5440" class="Function">decimalℤ</a> <a id="5474" class="Symbol">=</a> <a id="5476" href="Text.Parser.Combinators.Numbers.html#1325" class="Function">PCN.decimalℤ</a>


<a id="5491" class="Comment">---------------------</a>
<a id="5513" class="Comment">-- Testing parsers --</a>
<a id="5535" class="Comment">---------------------</a>

<a id="5558" class="Keyword">private</a>
  <a id="testHelper"></a><a id="5568" href="Text.Parser.html#5568" class="Function">testHelper</a> <a id="5579" class="Symbol">:</a> <a id="5581" class="Symbol">(</a><a id="5582" href="Text.Parser.html#5582" class="Bound">p</a> <a id="5584" class="Symbol">:</a> <a id="5586" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5589" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5596" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="5598" href="Relation.Unary.html#3359" class="Function">]</a><a id="5599" class="Symbol">)</a> <a id="5601" class="Symbol">(</a><a id="5602" href="Text.Parser.html#5602" class="Bound">str</a> <a id="5606" class="Symbol">:</a> <a id="5608" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="5614" class="Symbol">)</a> <a id="5616" class="Symbol">(</a><a id="5617" href="Text.Parser.html#5617" class="Bound">f</a> <a id="5619" class="Symbol">:</a> <a id="5621" href="Text.Parser.html#1357" class="Datatype">ErrorMsg</a> <a id="5630" class="Symbol">→</a> <a id="5632" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="5635" class="Symbol">)</a> <a id="5637" class="Symbol">(</a><a id="5638" href="Text.Parser.html#5638" class="Bound">t</a> <a id="5640" class="Symbol">:</a> <a id="5642" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="5644" class="Symbol">→</a> <a id="5646" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="5649" class="Symbol">)</a> <a id="5651" class="Symbol">→</a> <a id="5653" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="5659" href="Text.Parser.html#5568" class="Function">testHelper</a> <a id="5670" href="Text.Parser.html#5670" class="Bound">p</a> <a id="5672" href="Text.Parser.html#5672" class="Bound">str</a> <a id="5676" href="Text.Parser.html#5676" class="Bound">f</a> <a id="5678" href="Text.Parser.html#5678" class="Bound">t</a> <a id="5680" class="Symbol">=</a> <a id="5682" href="Function.Base.html#3709" class="Function Operator">case</a> <a id="5687" href="Text.Parser.html#2512" class="Function">runParser</a> <a id="5697" href="Text.Parser.html#5670" class="Bound">p</a> <a id="5699" href="Text.Parser.html#5672" class="Bound">str</a> <a id="5703" href="Function.Base.html#3709" class="Function Operator">of</a> <a id="5706" href="Data.Sum.Base.html#1083" class="Function Operator">Sum.[</a> <a id="5712" href="Text.Parser.html#5676" class="Bound">f</a> <a id="5714" href="Data.Sum.Base.html#1083" class="Function Operator">,</a> <a id="5716" href="Text.Parser.html#5678" class="Bound">t</a> <a id="5718" href="Data.Sum.Base.html#1083" class="Function Operator">]′</a>

<a id="5722" class="Comment">-- |Tests if the parser accepts a string.</a>
<a id="5764" class="Comment">--</a>
<a id="5767" class="Comment">--  The resulting value is passed to a continuation for further inspection,</a>
<a id="5843" class="Comment">--  for instance, to allow the user to compare it to the expected value.</a>
<a id="_parses_as_"></a><a id="5916" href="Text.Parser.html#5916" class="Function Operator">_parses_as_</a> <a id="5928" class="Symbol">:</a> <a id="5930" class="Symbol">(</a><a id="5931" href="Text.Parser.html#5931" class="Bound">p</a> <a id="5933" class="Symbol">:</a> <a id="5935" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5938" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="5945" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="5947" href="Relation.Unary.html#3359" class="Function">]</a><a id="5948" class="Symbol">)</a> <a id="5950" class="Symbol">(</a><a id="5951" href="Text.Parser.html#5951" class="Bound">str</a> <a id="5955" class="Symbol">:</a> <a id="5957" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="5963" class="Symbol">)</a> <a id="5965" class="Symbol">{</a><a id="5966" href="Text.Parser.html#5966" class="Bound">P</a> <a id="5968" class="Symbol">:</a> <a id="5970" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="5972" class="Symbol">→</a> <a id="5974" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="5977" class="Symbol">}</a> <a id="5979" class="Symbol">(</a><a id="5980" href="Text.Parser.html#5980" class="Bound">k</a> <a id="5982" class="Symbol">:</a> <a id="5984" class="Symbol">(</a><a id="5985" href="Text.Parser.html#5985" class="Bound">x</a> <a id="5987" class="Symbol">:</a> <a id="5989" href="Text.Parser.html#1506" class="Generalizable">A</a><a id="5990" class="Symbol">)</a> <a id="5992" class="Symbol">→</a> <a id="5994" href="Relation.Nullary.html#1508" class="Record">Dec</a> <a id="5998" class="Symbol">(</a><a id="5999" href="Text.Parser.html#5966" class="Bound">P</a> <a id="6001" href="Text.Parser.html#5985" class="Bound">x</a><a id="6002" class="Symbol">))</a> <a id="6005" class="Symbol">→</a> <a id="6007" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="6011" href="Text.Parser.html#6011" class="Bound">p</a> <a id="6013" href="Text.Parser.html#5916" class="Function Operator">parses</a> <a id="6020" href="Text.Parser.html#6020" class="Bound">str</a> <a id="6024" href="Text.Parser.html#5916" class="Function Operator">as</a> <a id="6027" href="Text.Parser.html#6027" class="Bound">k</a> <a id="6029" class="Symbol">=</a> <a id="6031" href="Text.Parser.html#5568" class="Function">testHelper</a> <a id="6042" href="Text.Parser.html#6011" class="Bound">p</a> <a id="6044" href="Text.Parser.html#6020" class="Bound">str</a> <a id="6048" href="Text.Parser.html#1442" class="Datatype">Error</a> <a id="6054" class="Symbol">(</a><a id="6055" href="Relation.Nullary.Decidable.Core.html#1365" class="Function">True</a> <a id="6060" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6062" href="Text.Parser.html#6027" class="Bound">k</a><a id="6063" class="Symbol">)</a>

<a id="6066" class="Comment">-- |Example use of `_parses_as_`.</a>
<a id="6100" href="Text.Parser.html#6100" class="Function">_</a> <a id="6102" class="Symbol">:</a> <a id="6104" href="Text.Parser.html#5370" class="Function">decimalℕ</a> <a id="6113" href="Text.Parser.html#5916" class="Function Operator">parses</a> <a id="6120" class="String">&quot;10&quot;</a> <a id="6125" href="Text.Parser.html#5916" class="Function Operator">as</a> <a id="6128" class="Symbol">(</a><a id="6129" href="Data.Nat.Properties.html#2252" class="Function Operator">Nat._≟</a> <a id="6136" class="Number">10</a><a id="6138" class="Symbol">)</a>
<a id="6140" class="Symbol">_</a> <a id="6142" class="Symbol">=</a> <a id="6144" class="Symbol">_</a>

<a id="6147" class="Comment">-- |Tests if the parser accepts a string.</a>
<a id="_accepts_"></a><a id="6189" href="Text.Parser.html#6189" class="Function Operator">_accepts_</a> <a id="6199" class="Symbol">:</a> <a id="6201" class="Symbol">(</a><a id="6202" href="Text.Parser.html#6202" class="Bound">p</a> <a id="6204" class="Symbol">:</a> <a id="6206" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="6209" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="6216" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="6218" href="Relation.Unary.html#3359" class="Function">]</a><a id="6219" class="Symbol">)</a> <a id="6221" class="Symbol">(</a><a id="6222" href="Text.Parser.html#6222" class="Bound">str</a> <a id="6226" class="Symbol">:</a> <a id="6228" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="6234" class="Symbol">)</a> <a id="6236" class="Symbol">→</a> <a id="6238" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="6242" href="Text.Parser.html#6242" class="Bound">p</a> <a id="6244" href="Text.Parser.html#6189" class="Function Operator">accepts</a> <a id="6252" href="Text.Parser.html#6252" class="Bound">str</a> <a id="6256" class="Symbol">=</a> <a id="6258" href="Text.Parser.html#5568" class="Function">testHelper</a> <a id="6269" href="Text.Parser.html#6242" class="Bound">p</a> <a id="6271" href="Text.Parser.html#6252" class="Bound">str</a> <a id="6275" class="Symbol">(</a><a id="6276" href="Function.Base.html#636" class="Function">const</a> <a id="6282" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="6283" class="Symbol">)</a> <a id="6285" class="Symbol">(</a><a id="6286" href="Function.Base.html#636" class="Function">const</a> <a id="6292" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="6293" class="Symbol">)</a>

<a id="6296" class="Comment">-- |Example use of `_accepts_`.</a>
<a id="6328" href="Text.Parser.html#6328" class="Function">_</a> <a id="6330" class="Symbol">:</a> <a id="6332" href="Text.Parser.html#5440" class="Function">decimalℤ</a> <a id="6341" href="Text.Parser.html#6189" class="Function Operator">accepts</a> <a id="6349" class="String">&quot;-10&quot;</a>
<a id="6355" class="Symbol">_</a> <a id="6357" class="Symbol">=</a> <a id="6359" class="Symbol">_</a>

<a id="6362" class="Comment">-- |Tests if the parser rejects a string.</a>
<a id="_rejects_"></a><a id="6404" href="Text.Parser.html#6404" class="Function Operator">_rejects_</a> <a id="6414" class="Symbol">:</a> <a id="6416" class="Symbol">(</a><a id="6417" href="Text.Parser.html#6417" class="Bound">p</a> <a id="6419" class="Symbol">:</a> <a id="6421" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="6424" href="Text.Parser.html#2392" class="Function">Parser</a> <a id="6431" href="Text.Parser.html#1506" class="Generalizable">A</a> <a id="6433" href="Relation.Unary.html#3359" class="Function">]</a><a id="6434" class="Symbol">)</a> <a id="6436" class="Symbol">(</a><a id="6437" href="Text.Parser.html#6437" class="Bound">str</a> <a id="6441" class="Symbol">:</a> <a id="6443" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="6449" class="Symbol">)</a> <a id="6451" class="Symbol">→</a> <a id="6453" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="6457" href="Text.Parser.html#6457" class="Bound">p</a> <a id="6459" href="Text.Parser.html#6404" class="Function Operator">rejects</a> <a id="6467" href="Text.Parser.html#6467" class="Bound">str</a> <a id="6471" class="Symbol">=</a> <a id="6473" href="Text.Parser.html#5568" class="Function">testHelper</a> <a id="6484" href="Text.Parser.html#6457" class="Bound">p</a> <a id="6486" href="Text.Parser.html#6467" class="Bound">str</a> <a id="6490" class="Symbol">(</a><a id="6491" href="Function.Base.html#636" class="Function">const</a> <a id="6497" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="6498" class="Symbol">)</a> <a id="6500" class="Symbol">(</a><a id="6501" href="Function.Base.html#636" class="Function">const</a> <a id="6507" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="6508" class="Symbol">)</a>

<a id="6511" class="Comment">-- |Example use of `_rejects_`.</a>
<a id="6543" href="Text.Parser.html#6543" class="Function">_</a> <a id="6545" class="Symbol">:</a> <a id="6547" href="Text.Parser.html#5370" class="Function">decimalℕ</a> <a id="6556" href="Text.Parser.html#6404" class="Function Operator">rejects</a> <a id="6564" class="String">&quot;-10&quot;</a>
<a id="6570" class="Symbol">_</a> <a id="6572" class="Symbol">=</a> <a id="6574" class="Symbol">_</a>


</pre></body></html>