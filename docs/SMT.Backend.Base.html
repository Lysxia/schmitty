<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SMT.Backend.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--guardedness</a> <a id="27" class="Symbol">#-}</a>

<a id="32" class="Comment">--------------------------------------------------------------------------------</a>
<a id="113" class="Comment">-- Schmitty the Solver</a>
<a id="136" class="Comment">--</a>
<a id="139" class="Comment">-- Defines various helper functions used in all backends.</a>
<a id="197" class="Comment">--------------------------------------------------------------------------------</a>

<a id="279" class="Keyword">module</a> <a id="286" href="SMT.Backend.Base.html" class="Module">SMT.Backend.Base</a> <a id="303" class="Keyword">where</a>

<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Data.List.html" class="Module">Data.List</a> <a id="332" class="Symbol">as</a> <a id="335" class="Module">List</a> <a id="340" class="Keyword">using</a> <a id="346" class="Symbol">(</a><a id="347" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="351" class="Symbol">;</a> <a id="353" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="356" class="Symbol">;</a> <a id="358" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="360" class="Symbol">)</a>
<a id="362" class="Keyword">open</a> <a id="367" class="Keyword">import</a> <a id="374" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="403" class="Symbol">as</a> <a id="406" class="Module">All</a> <a id="410" class="Keyword">using</a> <a id="416" class="Symbol">(</a><a id="417" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a><a id="420" class="Symbol">;</a> <a id="422" href="Data.List.Relation.Unary.All.html#1524" class="InductiveConstructor Operator">_∷_</a><a id="425" class="Symbol">;</a> <a id="427" href="Data.List.Relation.Unary.All.html#1507" class="InductiveConstructor">[]</a><a id="429" class="Symbol">)</a>
<a id="431" class="Keyword">open</a> <a id="436" class="Keyword">import</a> <a id="443" href="Data.Product.html" class="Module">Data.Product</a> <a id="456" class="Keyword">using</a> <a id="462" class="Symbol">(</a><a id="463" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="466" class="Symbol">;</a> <a id="468" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="471" class="Symbol">;</a> <a id="473" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="478" class="Symbol">;</a> <a id="480" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="485" class="Symbol">)</a>
<a id="487" class="Keyword">open</a> <a id="492" class="Keyword">import</a> <a id="499" href="Data.String.html" class="Module">Data.String</a> <a id="511" class="Symbol">as</a> <a id="514" class="Module">String</a> <a id="521" class="Keyword">using</a> <a id="527" class="Symbol">(</a><a id="528" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="534" class="Symbol">)</a>
<a id="536" class="Keyword">open</a> <a id="541" class="Keyword">import</a> <a id="548" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="558" class="Keyword">using</a> <a id="564" class="Symbol">(</a><a id="565" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="566" class="Symbol">)</a>
<a id="568" class="Keyword">open</a> <a id="573" class="Keyword">import</a> <a id="580" href="Function.html" class="Module">Function</a> <a id="589" class="Keyword">using</a> <a id="595" class="Symbol">(</a><a id="596" href="Function.Base.html#4121" class="Function Operator">case_of_</a><a id="604" class="Symbol">;</a> <a id="606" href="Function.Base.html#636" class="Function">const</a><a id="611" class="Symbol">;</a> <a id="613" href="Function.Base.html#1919" class="Function Operator">_$_</a><a id="616" class="Symbol">;</a> <a id="618" href="Function.Base.html#1031" class="Function Operator">_∘_</a><a id="621" class="Symbol">;</a> <a id="623" href="Function.Base.html#1554" class="Function">flip</a><a id="627" class="Symbol">)</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Reflection.html" class="Module">Reflection</a> <a id="652" class="Symbol">as</a> <a id="655" class="Module">Rfl</a> <a id="659" class="Keyword">using</a> <a id="665" class="Symbol">(</a><a id="666" href="Agda.Builtin.Reflection.html#8261" class="Postulate">return</a><a id="672" class="Symbol">;</a> <a id="674" href="Reflection.TypeChecking.Monad.Syntax.html#682" class="Function Operator">_&gt;&gt;=_</a><a id="679" class="Symbol">;</a> <a id="681" href="Reflection.TypeChecking.Monad.Syntax.html#752" class="Function Operator">_&gt;&gt;_</a><a id="685" class="Symbol">)</a>
<a id="687" class="Keyword">open</a> <a id="692" class="Keyword">import</a> <a id="699" href="Reflection.Normalise.html" class="Module">Reflection.Normalise</a> <a id="720" class="Keyword">using</a> <a id="726" class="Symbol">(</a><a id="727" href="Reflection.Normalise.html#1678" class="Function">normaliseClosed</a><a id="742" class="Symbol">)</a>
<a id="744" class="Keyword">open</a> <a id="749" class="Keyword">import</a> <a id="756" href="SMT.Theory.html" class="Module">SMT.Theory</a>


<a id="769" class="Keyword">postulate</a>
  <a id="because"></a><a id="781" href="SMT.Backend.Base.html#781" class="Postulate">because</a> <a id="789" class="Symbol">:</a> <a id="791" class="Symbol">∀</a> <a id="793" class="Symbol">{</a><a id="794" href="SMT.Backend.Base.html#794" class="Bound">a</a><a id="795" class="Symbol">}</a> <a id="797" class="Symbol">(</a><a id="798" href="SMT.Backend.Base.html#798" class="Bound">solver</a> <a id="805" class="Symbol">:</a> <a id="807" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="813" class="Symbol">)</a> <a id="815" class="Symbol">(</a><a id="816" href="SMT.Backend.Base.html#816" class="Bound">A</a> <a id="818" class="Symbol">:</a> <a id="820" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="824" href="SMT.Backend.Base.html#794" class="Bound">a</a><a id="825" class="Symbol">)</a> <a id="827" class="Symbol">→</a> <a id="829" href="SMT.Backend.Base.html#816" class="Bound">A</a>

<a id="`because"></a><a id="832" href="SMT.Backend.Base.html#832" class="Function">`because</a> <a id="841" class="Symbol">:</a> <a id="843" class="Symbol">(</a><a id="844" href="SMT.Backend.Base.html#844" class="Bound">solver</a> <a id="851" class="Symbol">:</a> <a id="853" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="859" class="Symbol">)</a> <a id="861" class="Symbol">(</a><a id="862" href="SMT.Backend.Base.html#862" class="Bound">A</a> <a id="864" class="Symbol">:</a> <a id="866" href="Agda.Builtin.Reflection.html#4759" class="Function">Rfl.Type</a><a id="874" class="Symbol">)</a> <a id="876" class="Symbol">→</a> <a id="878" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
<a id="887" href="SMT.Backend.Base.html#832" class="Function">`because</a> <a id="896" href="SMT.Backend.Base.html#896" class="Bound">solver</a> <a id="903" href="SMT.Backend.Base.html#903" class="Bound">A</a> <a id="905" class="Symbol">=</a> <a id="907" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">Rfl.def</a> <a id="915" class="Symbol">(</a><a id="916" class="Keyword">quote</a> <a id="922" href="SMT.Backend.Base.html#781" class="Postulate">because</a><a id="929" class="Symbol">)</a> <a id="931" class="Symbol">(</a><a id="932" href="Reflection.Argument.html#1209" class="InductiveConstructor">Rfl.vArg</a> <a id="941" class="Symbol">(</a><a id="942" href="Agda.Builtin.Reflection.html#5161" class="InductiveConstructor">Rfl.lit</a> <a id="950" class="Symbol">(</a><a id="951" href="Agda.Builtin.Reflection.html#4250" class="InductiveConstructor">Rfl.string</a> <a id="962" href="SMT.Backend.Base.html#896" class="Bound">solver</a><a id="968" class="Symbol">))</a> <a id="971" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="973" href="Reflection.Argument.html#1209" class="InductiveConstructor">Rfl.vArg</a> <a id="982" href="SMT.Backend.Base.html#903" class="Bound">A</a> <a id="984" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="986" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="988" class="Symbol">)</a>


<a id="992" class="Keyword">module</a> <a id="Solver"></a><a id="999" href="SMT.Backend.Base.html#999" class="Module">Solver</a> <a id="1006" class="Symbol">{</a><a id="1007" href="SMT.Backend.Base.html#1007" class="Bound">theory</a> <a id="1014" class="Symbol">:</a> <a id="1016" href="SMT.Theory.Base.html#3890" class="Record">Theory</a><a id="1022" class="Symbol">}</a> <a id="1024" class="Symbol">(</a><a id="1025" href="SMT.Backend.Base.html#1025" class="Bound">reflectable</a> <a id="1037" class="Symbol">:</a> <a id="1039" href="SMT.Theory.Reflectable.html#933" class="Record">Reflectable</a> <a id="1051" href="SMT.Backend.Base.html#1007" class="Bound">theory</a><a id="1057" class="Symbol">)</a> <a id="1059" class="Keyword">where</a>

  <a id="1068" class="Keyword">open</a> <a id="1073" href="SMT.Theory.Base.html#3890" class="Module">Theory</a> <a id="1080" href="SMT.Backend.Base.html#1007" class="Bound">theory</a>
  <a id="1089" class="Keyword">open</a> <a id="1094" href="SMT.Theory.Reflectable.html#933" class="Module">Reflectable</a> <a id="1106" href="SMT.Backend.Base.html#1025" class="Bound">reflectable</a>
  <a id="1120" class="Keyword">open</a> <a id="1125" class="Keyword">import</a> <a id="1132" href="SMT.Script.html" class="Module">SMT.Script</a> <a id="1143" href="SMT.Backend.Base.html#1025" class="Bound">reflectable</a>

  <a id="1158" class="Keyword">private</a>
    <a id="1170" class="Keyword">variable</a>
      <a id="1185" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="1187" href="SMT.Backend.Base.html#1187" class="Generalizable">Γ′</a> <a id="1190" class="Symbol">:</a> <a id="1192" href="SMT.Script.Base.html#2508" class="Function">Ctxt</a>
      <a id="1203" href="SMT.Backend.Base.html#1203" class="Generalizable">Ξ</a> <a id="1205" class="Symbol">:</a> <a id="1207" href="SMT.Script.Base.html#5737" class="Function">OutputCtxt</a>

    <a id="1223" class="Comment">-- Instantiate the arguments to a Π-type with the values in a Model.</a>
    <a id="1296" class="Comment">--</a>
    <a id="1303" class="Comment">-- NOTE: We assume all declare-consts are up front, which is what we return</a>
    <a id="1383" class="Comment">--       from reflectToRawScript. Possibly, the output of quoteInterpValues</a>
    <a id="1463" class="Comment">--       needs to be reversed.</a>
    <a id="1498" class="Comment">--</a>
    <a id="Solver.piApply"></a><a id="1505" href="SMT.Backend.Base.html#1505" class="Function">piApply</a> <a id="1513" class="Symbol">:</a> <a id="1515" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="1524" class="Symbol">→</a> <a id="1526" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1531" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="1540" class="Symbol">→</a> <a id="1542" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
    <a id="1555" href="SMT.Backend.Base.html#1505" class="Function">piApply</a> <a id="1563" href="SMT.Backend.Base.html#1563" class="Bound">goal</a> <a id="1568" href="SMT.Backend.Base.html#1568" class="Bound">vs</a> <a id="1571" class="Symbol">=</a> <a id="1573" href="SMT.Backend.Base.html#1610" class="Function">piApply′</a> <a id="1582" href="SMT.Backend.Base.html#1563" class="Bound">goal</a> <a id="1587" href="SMT.Backend.Base.html#1568" class="Bound">vs</a>
      <a id="1596" class="Keyword">where</a>
        <a id="1610" href="SMT.Backend.Base.html#1610" class="Function">piApply′</a> <a id="1619" class="Symbol">:</a> <a id="1621" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="1630" class="Symbol">→</a> <a id="1632" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1637" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="1646" class="Symbol">→</a> <a id="1648" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
        <a id="1665" href="SMT.Backend.Base.html#1610" class="Function">piApply′</a> <a id="1674" href="SMT.Backend.Base.html#1674" class="Bound">t</a> <a id="1676" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1679" class="Symbol">=</a> <a id="1681" href="SMT.Backend.Base.html#1674" class="Bound">t</a>
        <a id="1691" href="SMT.Backend.Base.html#1610" class="Function">piApply′</a> <a id="1700" class="Symbol">(</a><a id="1701" href="Agda.Builtin.Reflection.html#5078" class="InductiveConstructor">Rfl.pi</a> <a id="1708" class="Symbol">(</a><a id="1709" href="Agda.Builtin.Reflection.html#3733" class="InductiveConstructor">Rfl.arg</a> <a id="1717" class="Symbol">_</a> <a id="1719" href="SMT.Backend.Base.html#1719" class="Bound">a</a><a id="1720" class="Symbol">)</a> <a id="1722" class="Symbol">(</a><a id="1723" href="Agda.Builtin.Reflection.html#3980" class="InductiveConstructor">Rfl.abs</a> <a id="1731" href="SMT.Backend.Base.html#1731" class="Bound">x</a> <a id="1733" href="SMT.Backend.Base.html#1733" class="Bound">b</a><a id="1734" class="Symbol">))</a> <a id="1737" class="Symbol">(</a><a id="1738" href="SMT.Backend.Base.html#1738" class="Bound">v</a> <a id="1740" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1742" href="SMT.Backend.Base.html#1742" class="Bound">args</a><a id="1746" class="Symbol">)</a> <a id="1748" class="Symbol">=</a>
          <a id="1760" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">Rfl.def</a> <a id="1768" class="Symbol">(</a><a id="1769" class="Keyword">quote</a> <a id="1775" href="Function.Base.html#3839" class="Function Operator">Function._$′_</a><a id="1788" class="Symbol">)</a>
                  <a id="1808" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1810" href="Reflection.Argument.html#1271" class="InductiveConstructor">Rfl.hArg</a> <a id="1819" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">Rfl.unknown</a>
                  <a id="1849" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1851" href="Reflection.Argument.html#1271" class="InductiveConstructor">Rfl.hArg</a> <a id="1860" href="SMT.Backend.Base.html#1719" class="Bound">a</a>
                  <a id="1880" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1882" href="Reflection.Argument.html#1271" class="InductiveConstructor">Rfl.hArg</a> <a id="1891" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">Rfl.unknown</a>
                  <a id="1921" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1923" href="Reflection.Argument.html#1271" class="InductiveConstructor">Rfl.hArg</a> <a id="1932" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">Rfl.unknown</a>
                  <a id="1962" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1964" href="Reflection.Argument.html#1209" class="InductiveConstructor">Rfl.vArg</a> <a id="1973" class="Symbol">(</a><a id="1974" href="Agda.Builtin.Reflection.html#4960" class="InductiveConstructor">Rfl.lam</a> <a id="1982" href="Agda.Builtin.Reflection.html#2763" class="InductiveConstructor">Rfl.visible</a> <a id="1994" class="Symbol">(</a><a id="1995" href="Agda.Builtin.Reflection.html#3980" class="InductiveConstructor">Rfl.abs</a> <a id="2003" href="SMT.Backend.Base.html#1731" class="Bound">x</a> <a id="2005" class="Symbol">(</a><a id="2006" href="SMT.Backend.Base.html#1505" class="Function">piApply</a> <a id="2014" href="SMT.Backend.Base.html#1733" class="Bound">b</a> <a id="2016" href="SMT.Backend.Base.html#1742" class="Bound">args</a><a id="2020" class="Symbol">)))</a>
                  <a id="2042" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2044" href="Reflection.Argument.html#1209" class="InductiveConstructor">Rfl.vArg</a> <a id="2053" href="SMT.Backend.Base.html#1738" class="Bound">v</a>
                  <a id="2073" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2075" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
        <a id="2086" href="SMT.Backend.Base.html#1610" class="CatchallClause Function">piApply′</a><a id="2094" class="CatchallClause"> </a><a id="2095" href="SMT.Backend.Base.html#2095" class="CatchallClause Bound">t</a><a id="2096" class="CatchallClause"> </a><a id="2097" class="CatchallClause Symbol">_</a> <a id="2099" class="Symbol">=</a> <a id="2101" href="SMT.Backend.Base.html#2095" class="Bound">t</a> <a id="2103" class="Comment">-- impossible?</a>

    <a id="Solver.counterExampleFmt"></a><a id="2123" href="SMT.Backend.Base.html#2123" class="Function">counterExampleFmt</a> <a id="2141" class="Symbol">:</a> <a id="2143" href="SMT.Script.Base.html#11154" class="Function">VarNames</a> <a id="2152" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="2154" class="Symbol">→</a> <a id="2156" href="SMT.Script.Base.html#8454" class="Function">ValueInterps</a> <a id="2169" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="2171" class="Symbol">→</a> <a id="2173" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2178" href="Agda.Builtin.Reflection.html#7893" class="Datatype">Rfl.ErrorPart</a> <a id="2192" class="Symbol">→</a> <a id="2194" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2199" href="Agda.Builtin.Reflection.html#7893" class="Datatype">Rfl.ErrorPart</a>
    <a id="2217" href="SMT.Backend.Base.html#2123" class="Function">counterExampleFmt</a> <a id="2235" href="Data.List.Relation.Unary.All.html#1507" class="InductiveConstructor">[]</a>       <a id="2244" href="Data.List.Relation.Unary.All.html#1507" class="InductiveConstructor">[]</a>      <a id="2252" href="SMT.Backend.Base.html#2252" class="Bound">acc</a> <a id="2256" class="Symbol">=</a> <a id="2258" href="SMT.Backend.Base.html#2252" class="Bound">acc</a>
    <a id="2266" href="SMT.Backend.Base.html#2123" class="Function">counterExampleFmt</a> <a id="2284" class="Symbol">(</a><a id="2285" href="SMT.Backend.Base.html#2285" class="Bound">x</a> <a id="2287" href="Data.List.Relation.Unary.All.html#1524" class="InductiveConstructor Operator">∷</a> <a id="2289" href="SMT.Backend.Base.html#2289" class="Bound">xs</a><a id="2291" class="Symbol">)</a> <a id="2293" class="Symbol">(</a><a id="2294" href="SMT.Backend.Base.html#2294" class="Bound">v</a> <a id="2296" href="Data.List.Relation.Unary.All.html#1524" class="InductiveConstructor Operator">∷</a> <a id="2298" href="SMT.Backend.Base.html#2298" class="Bound">m</a><a id="2299" class="Symbol">)</a> <a id="2301" href="SMT.Backend.Base.html#2301" class="Bound">acc</a> <a id="2305" class="Symbol">=</a>
      <a id="2313" href="SMT.Backend.Base.html#2123" class="Function">counterExampleFmt</a> <a id="2331" href="SMT.Backend.Base.html#2289" class="Bound">xs</a> <a id="2334" href="SMT.Backend.Base.html#2298" class="Bound">m</a> <a id="2336" href="Function.Base.html#1919" class="Function Operator">$</a>
        <a id="2346" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">Rfl.strErr</a> <a id="2357" class="String">&quot;  &quot;</a> <a id="2362" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2364" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">Rfl.strErr</a> <a id="2375" href="SMT.Backend.Base.html#2285" class="Bound">x</a> <a id="2377" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2379" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">Rfl.strErr</a> <a id="2390" class="String">&quot; = &quot;</a> <a id="2396" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2398" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">Rfl.termErr</a> <a id="2410" href="SMT.Backend.Base.html#2294" class="Bound">v</a> <a id="2412" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2414" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">Rfl.strErr</a> <a id="2425" class="String">&quot;\n&quot;</a> <a id="2430" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2432" href="SMT.Backend.Base.html#2301" class="Bound">acc</a>

  <a id="Solver.typeErrorCounterExample"></a><a id="2439" href="SMT.Backend.Base.html#2439" class="Function">typeErrorCounterExample</a> <a id="2463" class="Symbol">:</a> <a id="2465" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="2474" class="Symbol">→</a> <a id="2476" href="SMT.Script.Base.html#10107" class="Datatype">Script</a> <a id="2483" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="2486" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="2488" href="SMT.Backend.Base.html#1203" class="Generalizable">Ξ</a> <a id="2490" class="Symbol">→</a> <a id="2492" href="SMT.Script.Base.html#6579" class="Datatype">Model</a> <a id="2498" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="2500" class="Symbol">→</a> <a id="2502" href="Agda.Builtin.Reflection.html#8218" class="Postulate">Rfl.TC</a> <a id="2509" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="2513" href="SMT.Backend.Base.html#2439" class="Function">typeErrorCounterExample</a> <a id="2537" href="SMT.Backend.Base.html#2537" class="Bound">goal</a> <a id="2542" href="SMT.Backend.Base.html#2542" class="Bound">scr</a> <a id="2546" href="SMT.Backend.Base.html#2546" class="Bound">vs</a> <a id="2549" class="Symbol">=</a> <a id="2551" class="Keyword">do</a>
    <a id="2558" class="Keyword">let</a> <a id="2562" href="SMT.Backend.Base.html#2562" class="Bound">`vs</a> <a id="2566" class="Symbol">=</a> <a id="2568" href="SMT.Script.Base.html#8578" class="Function">quoteInterpValues</a> <a id="2586" href="SMT.Backend.Base.html#2546" class="Bound">vs</a>
    <a id="2593" href="SMT.Backend.Base.html#2593" class="Bound">instGoal₀</a> <a id="2603" href="Reflection.TypeChecking.Monad.Syntax.html#682" class="Function Operator">←</a> <a id="2605" href="Agda.Builtin.Reflection.html#8609" class="Postulate">Rfl.reduce</a> <a id="2616" class="Symbol">(</a><a id="2617" href="SMT.Backend.Base.html#1505" class="Function">piApply</a> <a id="2625" href="SMT.Backend.Base.html#2537" class="Bound">goal</a> <a id="2630" class="Symbol">(</a><a id="2631" href="Data.List.Base.html#9817" class="Function">List.reverse</a> <a id="2644" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2646" href="Data.List.Base.html#1544" class="Function">List.map</a> <a id="2655" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2661" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2663" href="Data.List.Relation.Unary.All.html#2859" class="Function">All.toList</a> <a id="2674" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2676" href="SMT.Backend.Base.html#2562" class="Bound">`vs</a><a id="2679" class="Symbol">))</a>
    <a id="2686" href="SMT.Backend.Base.html#2686" class="Bound">instGoal</a> <a id="2695" href="Reflection.TypeChecking.Monad.Syntax.html#682" class="Function Operator">←</a> <a id="2697" href="Reflection.Normalise.html#1678" class="Function">normaliseClosed</a> <a id="2713" href="SMT.Backend.Base.html#2593" class="Bound">instGoal₀</a>
    <a id="2727" href="Reflection.TypeChecking.Format.html#2592" class="Function">Rfl.typeErrorFmt</a> <a id="2744" class="String">&quot;Found counter-example:\n%erefuting %t&quot;</a>
      <a id="2790" class="Symbol">(</a><a id="2791" href="SMT.Backend.Base.html#2123" class="Function">counterExampleFmt</a> <a id="2809" class="Symbol">(</a><a id="2810" href="SMT.Script.Base.html#11207" class="Function">scriptVarNames</a> <a id="2825" href="SMT.Backend.Base.html#2542" class="Bound">scr</a><a id="2828" class="Symbol">)</a> <a id="2830" href="SMT.Backend.Base.html#2562" class="Bound">`vs</a> <a id="2834" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2836" class="Symbol">)</a> <a id="2838" href="SMT.Backend.Base.html#2686" class="Bound">instGoal</a>

  <a id="Solver.buildProof′"></a><a id="2850" href="SMT.Backend.Base.html#2850" class="Function">buildProof′</a> <a id="2862" class="Symbol">:</a> <a id="2864" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="2871" class="Symbol">→</a> <a id="2873" href="SMT.Script.Base.html#10107" class="Datatype">Script</a> <a id="2880" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="2882" href="SMT.Backend.Base.html#1187" class="Generalizable">Γ′</a> <a id="2885" href="SMT.Backend.Base.html#1203" class="Generalizable">Ξ</a> <a id="2887" class="Symbol">→</a> <a id="2889" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
  <a id="2900" href="SMT.Backend.Base.html#2850" class="Function">buildProof′</a> <a id="2912" href="SMT.Backend.Base.html#2912" class="Bound">name</a> <a id="2917" class="Symbol">(</a><a id="2918" href="SMT.Script.Base.html#9875" class="InductiveConstructor">`assert</a> <a id="2926" href="SMT.Backend.Base.html#2926" class="Bound">t</a> <a id="2928" href="SMT.Script.Base.html#10192" class="InductiveConstructor Operator">∷</a> <a id="2930" href="SMT.Script.Base.html#10170" class="InductiveConstructor">[]</a><a id="2932" class="Symbol">)</a> <a id="2934" class="Symbol">=</a> <a id="2936" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">Rfl.def</a> <a id="2944" class="Symbol">(</a><a id="2945" href="SMT.Theory.Reflectable.html#1411" class="Field">proofComputation</a> <a id="2962" href="SMT.Backend.Base.html#2926" class="Bound">t</a><a id="2963" class="Symbol">)</a> <a id="2965" class="Symbol">(</a><a id="2966" href="Reflection.Argument.html#1209" class="InductiveConstructor">Rfl.vArg</a> <a id="2975" class="Symbol">(</a><a id="2976" href="SMT.Backend.Base.html#832" class="Function">`because</a> <a id="2985" href="SMT.Backend.Base.html#2912" class="Bound">name</a> <a id="2990" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">Rfl.unknown</a><a id="3001" class="Symbol">)</a> <a id="3003" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3005" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3007" class="Symbol">)</a>
  <a id="3011" href="SMT.Backend.Base.html#2850" class="CatchallClause Function">buildProof′</a><a id="3022" class="CatchallClause"> </a><a id="3023" href="SMT.Backend.Base.html#3023" class="CatchallClause Bound">name</a><a id="3027" class="CatchallClause"> </a><a id="3028" class="CatchallClause Symbol">(_</a><a id="3030" class="CatchallClause"> </a><a id="3031" href="SMT.Script.Base.html#10192" class="CatchallClause InductiveConstructor Operator">∷</a><a id="3032" class="CatchallClause"> </a><a id="3033" href="SMT.Backend.Base.html#3033" class="CatchallClause Bound">scr</a><a id="3036" class="CatchallClause Symbol">)</a>        <a id="3045" class="Symbol">=</a> <a id="3047" href="SMT.Backend.Base.html#2850" class="Function">buildProof′</a> <a id="3059" href="SMT.Backend.Base.html#3023" class="Bound">name</a> <a id="3064" href="SMT.Backend.Base.html#3033" class="Bound">scr</a>
  <a id="3070" href="SMT.Backend.Base.html#2850" class="Function">buildProof′</a> <a id="3082" href="SMT.Backend.Base.html#3082" class="Bound">name</a> <a id="3087" href="SMT.Script.Base.html#10170" class="InductiveConstructor">[]</a>               <a id="3104" class="Symbol">=</a> <a id="3106" href="SMT.Backend.Base.html#832" class="Function">`because</a> <a id="3115" href="SMT.Backend.Base.html#3082" class="Bound">name</a> <a id="3120" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">Rfl.unknown</a>

  <a id="Solver.buildProof"></a><a id="3135" href="SMT.Backend.Base.html#3135" class="Function">buildProof</a> <a id="3146" class="Symbol">:</a> <a id="3148" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="3155" class="Symbol">→</a> <a id="3157" href="SMT.Script.Base.html#10107" class="Datatype">Script</a> <a id="3164" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="3167" href="SMT.Backend.Base.html#1185" class="Generalizable">Γ</a> <a id="3169" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="3172" class="Symbol">→</a> <a id="3174" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="3183" class="Symbol">→</a> <a id="3185" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
  <a id="3196" href="SMT.Backend.Base.html#3135" class="Function">buildProof</a> <a id="3207" href="SMT.Backend.Base.html#3207" class="Bound">name</a> <a id="3212" href="SMT.Backend.Base.html#3212" class="Bound">scr</a> <a id="3216" class="Symbol">(</a><a id="3217" href="Agda.Builtin.Reflection.html#5078" class="InductiveConstructor">Rfl.pi</a> <a id="3224" class="Symbol">(</a><a id="3225" href="Agda.Builtin.Reflection.html#3733" class="InductiveConstructor">Rfl.arg</a> <a id="3233" class="Symbol">(</a><a id="3234" href="Agda.Builtin.Reflection.html#3638" class="InductiveConstructor">Rfl.arg-info</a> <a id="3247" href="SMT.Backend.Base.html#3247" class="Bound">h</a> <a id="3249" class="Symbol">_)</a> <a id="3252" href="SMT.Backend.Base.html#3252" class="Bound">a</a><a id="3253" class="Symbol">)</a> <a id="3255" class="Symbol">(</a><a id="3256" href="Agda.Builtin.Reflection.html#3980" class="InductiveConstructor">Rfl.abs</a> <a id="3264" href="SMT.Backend.Base.html#3264" class="Bound">x</a> <a id="3266" href="SMT.Backend.Base.html#3266" class="Bound">b</a><a id="3267" class="Symbol">))</a> <a id="3270" class="Symbol">=</a>
    <a id="3276" class="Keyword">let</a> <a id="3280" href="SMT.Backend.Base.html#3280" class="Bound">x′</a> <a id="3283" class="Symbol">=</a> <a id="3285" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="3290" href="SMT.Backend.Base.html#3264" class="Bound">x</a> <a id="3292" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="3295" class="Symbol">λ</a> <a id="3297" class="Keyword">where</a> <a id="3303" class="String">&quot;_&quot;</a> <a id="3307" class="Symbol">→</a> <a id="3309" class="String">&quot;H&quot;</a><a id="3312" class="Symbol">;</a> <a id="3314" class="Symbol">_</a>   <a id="3318" class="Symbol">→</a> <a id="3320" href="SMT.Backend.Base.html#3264" class="Bound">x</a>
    <a id="3326" class="Keyword">in</a> <a id="3329" href="Agda.Builtin.Reflection.html#4960" class="InductiveConstructor">Rfl.lam</a> <a id="3337" href="SMT.Backend.Base.html#3247" class="Bound">h</a> <a id="3339" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3341" href="Agda.Builtin.Reflection.html#3980" class="InductiveConstructor">Rfl.abs</a> <a id="3349" href="SMT.Backend.Base.html#3280" class="Bound">x′</a> <a id="3352" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3354" href="SMT.Backend.Base.html#3135" class="Function">buildProof</a> <a id="3365" href="SMT.Backend.Base.html#3207" class="Bound">name</a> <a id="3370" href="SMT.Backend.Base.html#3212" class="Bound">scr</a> <a id="3374" href="SMT.Backend.Base.html#3266" class="Bound">b</a>
  <a id="3378" href="SMT.Backend.Base.html#3135" class="CatchallClause Function">buildProof</a><a id="3388" class="CatchallClause"> </a><a id="3389" href="SMT.Backend.Base.html#3389" class="CatchallClause Bound">name</a><a id="3393" class="CatchallClause"> </a><a id="3394" href="SMT.Backend.Base.html#3394" class="CatchallClause Bound">scr</a><a id="3397" class="CatchallClause"> </a><a id="3398" href="SMT.Backend.Base.html#3398" class="CatchallClause Bound">goal</a> <a id="3403" class="Symbol">=</a> <a id="3405" href="SMT.Backend.Base.html#2850" class="Function">buildProof′</a> <a id="3417" href="SMT.Backend.Base.html#3389" class="Bound">name</a> <a id="3422" href="SMT.Backend.Base.html#3394" class="Bound">scr</a>

  <a id="Solver.solve"></a><a id="3429" href="SMT.Backend.Base.html#3429" class="Function">solve</a> <a id="3435" class="Symbol">:</a> <a id="3437" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="3444" class="Symbol">→</a> <a id="3446" class="Symbol">(∀</a> <a id="3449" class="Symbol">{</a><a id="3450" href="SMT.Backend.Base.html#3450" class="Bound">Γ</a> <a id="3452" href="SMT.Backend.Base.html#3452" class="Bound">ξ</a> <a id="3454" href="SMT.Backend.Base.html#3454" class="Bound">Ξ</a><a id="3455" class="Symbol">}</a> <a id="3457" class="Symbol">→</a> <a id="3459" href="SMT.Script.Base.html#10107" class="Datatype">Script</a> <a id="3466" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="3469" href="SMT.Backend.Base.html#3450" class="Bound">Γ</a> <a id="3471" class="Symbol">(</a><a id="3472" href="SMT.Backend.Base.html#3452" class="Bound">ξ</a> <a id="3474" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3476" href="SMT.Backend.Base.html#3454" class="Bound">Ξ</a><a id="3477" class="Symbol">)</a> <a id="3479" class="Symbol">→</a> <a id="3481" href="Agda.Builtin.Reflection.html#8218" class="Postulate">Rfl.TC</a> <a id="3488" class="Symbol">(</a><a id="3489" href="SMT.Script.Base.html#7262" class="Datatype">Outputs</a> <a id="3497" class="Symbol">(</a><a id="3498" href="SMT.Backend.Base.html#3452" class="Bound">ξ</a> <a id="3500" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3502" href="SMT.Backend.Base.html#3454" class="Bound">Ξ</a><a id="3503" class="Symbol">)))</a> <a id="3507" class="Symbol">→</a> <a id="3509" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="3518" class="Symbol">→</a> <a id="3520" href="Agda.Builtin.Reflection.html#8218" class="Postulate">Rfl.TC</a> <a id="3527" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="3531" href="SMT.Backend.Base.html#3429" class="Function">solve</a> <a id="3537" href="SMT.Backend.Base.html#3537" class="Bound">name</a> <a id="3542" href="SMT.Backend.Base.html#3542" class="Bound">solver</a> <a id="3549" href="SMT.Backend.Base.html#3549" class="Bound">hole</a> <a id="3554" class="Symbol">=</a> <a id="3556" class="Keyword">do</a>
    <a id="3563" href="SMT.Backend.Base.html#3563" class="Bound">goal</a> <a id="3568" href="Reflection.TypeChecking.Monad.Syntax.html#682" class="Function Operator">←</a> <a id="3570" href="Agda.Builtin.Reflection.html#8494" class="Postulate">Rfl.inferType</a> <a id="3584" href="SMT.Backend.Base.html#3549" class="Bound">hole</a>
    <a id="3593" href="SMT.Backend.Base.html#3593" class="Bound">Γ</a> <a id="3595" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3597" href="SMT.Backend.Base.html#3597" class="Bound">scr</a> <a id="3601" href="Reflection.TypeChecking.Monad.Syntax.html#682" class="Function Operator">←</a> <a id="3603" href="SMT.Script.Reflection.html#5745" class="Function">reflectToScript</a> <a id="3619" href="SMT.Backend.Base.html#3563" class="Bound">goal</a>
    <a id="3628" class="Keyword">let</a> <a id="3632" href="SMT.Backend.Base.html#3632" class="Bound">scr′</a> <a id="3637" class="Symbol">=</a> <a id="3639" href="SMT.Backend.Base.html#3597" class="Bound">scr</a> <a id="3643" href="SMT.Script.Base.html#10277" class="Function Operator">◆</a> <a id="3645" href="SMT.Script.Base.html#9967" class="InductiveConstructor">`get-model</a> <a id="3656" href="SMT.Script.Base.html#10192" class="InductiveConstructor Operator">∷</a> <a id="3658" href="SMT.Script.Base.html#10170" class="InductiveConstructor">[]</a>
    <a id="3665" href="SMT.Backend.Base.html#3665" class="Bound">qm</a> <a id="3668" href="SMT.Script.Base.html#7322" class="InductiveConstructor Operator">∷</a> <a id="3670" href="SMT.Script.Base.html#7303" class="InductiveConstructor">[]</a> <a id="3673" href="Reflection.TypeChecking.Monad.Syntax.html#682" class="Function Operator">←</a> <a id="3675" href="SMT.Backend.Base.html#3542" class="Bound">solver</a> <a id="3682" href="SMT.Backend.Base.html#3632" class="Bound">scr′</a>
    <a id="3691" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="3696" href="SMT.Backend.Base.html#3665" class="Bound">qm</a> <a id="3699" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="3702" class="Symbol">λ</a> <a id="3704" class="Keyword">where</a>
      <a id="3716" class="Symbol">(</a><a id="3717" href="SMT.Script.Base.html#5906" class="InductiveConstructor">sat</a>     <a id="3725" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3727" href="SMT.Backend.Base.html#3727" class="Bound">m</a><a id="3728" class="Symbol">)</a> <a id="3730" class="Symbol">→</a> <a id="3732" href="SMT.Backend.Base.html#2439" class="Function">typeErrorCounterExample</a> <a id="3756" href="SMT.Backend.Base.html#3563" class="Bound">goal</a> <a id="3761" href="SMT.Backend.Base.html#3632" class="Bound">scr′</a> <a id="3766" href="SMT.Backend.Base.html#3727" class="Bound">m</a>
      <a id="3774" class="Symbol">(</a><a id="3775" href="SMT.Script.Base.html#5922" class="InductiveConstructor">unsat</a>   <a id="3783" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3785" class="Symbol">_)</a> <a id="3788" class="Symbol">→</a> <a id="3790" href="Agda.Builtin.Reflection.html#8391" class="Postulate">Rfl.unify</a> <a id="3800" href="SMT.Backend.Base.html#3549" class="Bound">hole</a> <a id="3805" class="Symbol">(</a><a id="3806" href="SMT.Backend.Base.html#3135" class="Function">buildProof</a> <a id="3817" href="SMT.Backend.Base.html#3537" class="Bound">name</a> <a id="3822" href="SMT.Backend.Base.html#3597" class="Bound">scr</a> <a id="3826" href="SMT.Backend.Base.html#3563" class="Bound">goal</a><a id="3830" class="Symbol">)</a>
      <a id="3838" class="Symbol">(</a><a id="3839" href="SMT.Script.Base.html#5938" class="InductiveConstructor">unknown</a> <a id="3847" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3849" class="Symbol">_)</a> <a id="3852" class="Symbol">→</a> <a id="3854" href="Reflection.TypeChecking.Format.html#2592" class="Function">Rfl.typeErrorFmt</a> <a id="3871" class="String">&quot;Solver returned &#39;unknown&#39;&quot;</a>
</pre></body></html>