<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SMT.Script.Reflection</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="SMT.Theory.html" class="Module">SMT.Theory</a>
<a id="24" class="Keyword">open</a> <a id="29" class="Keyword">import</a> <a id="36" href="SMT.Theory.Reflection.html" class="Module">SMT.Theory.Reflection</a>

<a id="59" class="Keyword">module</a> <a id="66" href="SMT.Script.Reflection.html" class="Module">SMT.Script.Reflection</a> <a id="88" class="Symbol">{</a><a id="89" href="SMT.Script.Reflection.html#89" class="Bound">theory</a> <a id="96" class="Symbol">:</a> <a id="98" href="SMT.Theory.html#2390" class="Record">Theory</a><a id="104" class="Symbol">}</a> <a id="106" class="Symbol">(</a><a id="107" href="SMT.Script.Reflection.html#107" class="Bound">reflectable</a> <a id="119" class="Symbol">:</a> <a id="121" href="SMT.Theory.Reflection.html#338" class="Record">Reflectable</a> <a id="133" href="SMT.Script.Reflection.html#89" class="Bound">theory</a><a id="139" class="Symbol">)</a> <a id="141" class="Keyword">where</a>

<a id="148" class="Keyword">open</a> <a id="153" href="SMT.Theory.html#2390" class="Module">Theory</a> <a id="160" href="SMT.Script.Reflection.html#89" class="Bound">theory</a>
<a id="167" class="Keyword">open</a> <a id="172" href="SMT.Theory.Reflection.html#338" class="Module">Reflectable</a> <a id="184" href="SMT.Script.Reflection.html#107" class="Bound">reflectable</a>

<a id="197" class="Keyword">open</a> <a id="202" class="Keyword">import</a> <a id="209" href="Category.Monad.html" class="Module">Category.Monad</a>
<a id="224" class="Keyword">open</a> <a id="229" class="Keyword">import</a> <a id="236" href="Data.Environment.html" class="Module">Data.Environment</a> <a id="253" class="Symbol">as</a> <a id="256" class="Module">Env</a> <a id="260" class="Keyword">using</a> <a id="266" class="Symbol">(</a><a id="267" href="Data.Environment.html#360" class="Datatype">Env</a><a id="270" class="Symbol">;</a> <a id="272" href="Data.Environment.html#427" class="InductiveConstructor Operator">_∷_</a><a id="275" class="Symbol">;</a> <a id="277" href="Data.Environment.html#410" class="InductiveConstructor">[]</a><a id="279" class="Symbol">)</a>
<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="302" class="Symbol">as</a> <a id="305" class="Module">Fin</a> <a id="309" class="Keyword">using</a> <a id="315" class="Symbol">(</a><a id="316" href="Data.Fin.Base.html#1138" class="Datatype">Fin</a><a id="319" class="Symbol">;</a> <a id="321" href="Data.Fin.Base.html#1191" class="InductiveConstructor">suc</a><a id="324" class="Symbol">;</a> <a id="326" href="Data.Fin.Base.html#1160" class="InductiveConstructor">zero</a><a id="330" class="Symbol">)</a>
<a id="332" class="Keyword">open</a> <a id="337" class="Keyword">import</a> <a id="344" href="Data.List.html" class="Module">Data.List</a> <a id="354" class="Symbol">as</a> <a id="357" class="Module">List</a> <a id="362" class="Keyword">using</a> <a id="368" class="Symbol">(</a><a id="369" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="373" class="Symbol">;</a> <a id="375" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="378" class="Symbol">;</a> <a id="380" href="Data.List.Base.html#9981" class="InductiveConstructor">[]</a><a id="382" class="Symbol">;</a> <a id="384" href="Data.List.Base.html#1763" class="Function Operator">_++_</a><a id="388" class="Symbol">;</a> <a id="390" href="Data.List.Base.html#4577" class="Function">length</a><a id="396" class="Symbol">)</a>
<a id="398" class="Keyword">open</a> <a id="403" class="Keyword">import</a> <a id="410" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="439" class="Keyword">using</a> <a id="445" class="Symbol">(</a><a id="446" href="Data.List.Relation.Unary.All.html#1397" class="Datatype">All</a><a id="449" class="Symbol">;</a> <a id="451" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">_∷_</a><a id="454" class="Symbol">;</a> <a id="456" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a><a id="458" class="Symbol">)</a>
<a id="460" class="Keyword">open</a> <a id="465" class="Keyword">import</a> <a id="472" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="483" class="Symbol">as</a> <a id="486" class="Module">Maybe</a> <a id="492" class="Keyword">using</a> <a id="498" class="Symbol">(</a><a id="499" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a><a id="504" class="Symbol">;</a> <a id="506" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a><a id="510" class="Symbol">;</a> <a id="512" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a><a id="519" class="Symbol">)</a>
<a id="521" class="Keyword">import</a> <a id="528" href="Data.Maybe.Categorical.html" class="Module">Data.Maybe.Categorical</a> <a id="551" class="Symbol">as</a> <a id="554" class="Module">MaybeCat</a>
<a id="563" class="Keyword">open</a> <a id="568" class="Keyword">import</a> <a id="575" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="584" class="Symbol">as</a> <a id="587" class="Module">Nat</a> <a id="591" class="Keyword">using</a> <a id="597" class="Symbol">(</a><a id="598" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="599" class="Symbol">;</a> <a id="601" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="604" class="Symbol">;</a> <a id="606" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="610" class="Symbol">)</a>
<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="Data.Product.html" class="Module">Data.Product</a> <a id="637" class="Symbol">as</a> <a id="640" class="Module">Prod</a> <a id="645" class="Keyword">using</a> <a id="651" class="Symbol">(</a><a id="652" href="Data.Product.html#1369" class="Function">∃</a><a id="653" class="Symbol">;</a> <a id="655" href="Data.Product.html#1788" class="Function">∃-syntax</a><a id="663" class="Symbol">;</a> <a id="665" href="Data.Product.html#2211" class="Function Operator">-,_</a><a id="668" class="Symbol">;</a> <a id="670" href="Data.Product.html#1167" class="Function Operator">_×_</a><a id="673" class="Symbol">;</a> <a id="675" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="678" class="Symbol">;</a> <a id="680" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="685" class="Symbol">;</a> <a id="687" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="692" class="Symbol">)</a>
<a id="694" class="Keyword">open</a> <a id="699" class="Keyword">import</a> <a id="706" href="Data.String.html" class="Module">Data.String</a> <a id="718" class="Symbol">as</a> <a id="721" class="Module">String</a> <a id="728" class="Keyword">using</a> <a id="734" class="Symbol">(</a><a id="735" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="741" class="Symbol">)</a>
<a id="743" class="Keyword">open</a> <a id="748" class="Keyword">import</a> <a id="755" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="765" class="Symbol">as</a> <a id="768" class="Module">Unit</a> <a id="773" class="Keyword">using</a> <a id="779" class="Symbol">(</a><a id="780" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="781" class="Symbol">)</a>
<a id="783" class="Keyword">open</a> <a id="788" class="Keyword">import</a> <a id="795" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="804" class="Symbol">as</a> <a id="807" class="Module">Vec</a> <a id="811" class="Keyword">using</a> <a id="817" class="Symbol">(</a><a id="818" href="Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="821" class="Symbol">;</a> <a id="823" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">_∷_</a><a id="826" class="Symbol">;</a> <a id="828" href="Data.Vec.Base.html#995" class="InductiveConstructor">[]</a><a id="830" class="Symbol">)</a>
<a id="832" class="Keyword">open</a> <a id="837" class="Keyword">import</a> <a id="844" href="Function.html" class="Module">Function</a> <a id="853" class="Keyword">using</a> <a id="859" class="Symbol">(</a><a id="860" href="Function.Base.html#1919" class="Function Operator">_$_</a><a id="863" class="Symbol">;</a> <a id="865" href="Function.Base.html#4121" class="Function Operator">case_of_</a><a id="873" class="Symbol">;</a> <a id="875" href="Function.Base.html#1031" class="Function Operator">_∘_</a><a id="878" class="Symbol">;</a> <a id="880" href="Function.Base.html#636" class="Function">const</a><a id="885" class="Symbol">;</a> <a id="887" href="Function.Base.html#1554" class="Function">flip</a><a id="891" class="Symbol">;</a> <a id="893" href="Function.Base.html#615" class="Function">id</a><a id="895" class="Symbol">)</a>
<a id="897" class="Keyword">import</a> <a id="904" href="Function.Identity.Categorical.html" class="Module">Function.Identity.Categorical</a> <a id="934" class="Symbol">as</a> <a id="937" class="Module">Identity</a>
<a id="946" class="Keyword">import</a> <a id="953" href="Level.html" class="Module">Level</a>
<a id="959" class="Keyword">import</a> <a id="966" href="Reflection.html" class="Module">Reflection</a> <a id="977" class="Symbol">as</a> <a id="980" class="Module">Rfl</a>
<a id="984" class="Keyword">open</a> <a id="989" class="Keyword">import</a> <a id="996" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1013" class="Keyword">using</a> <a id="1019" class="Symbol">(</a><a id="1020" href="Relation.Nullary.html#1508" class="Record">Dec</a><a id="1023" class="Symbol">;</a> <a id="1025" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="1028" class="Symbol">;</a> <a id="1030" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="1032" class="Symbol">)</a>
<a id="1034" class="Keyword">open</a> <a id="1039" class="Keyword">import</a> <a id="1046" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="1073" class="Keyword">using</a> <a id="1079" class="Symbol">(</a><a id="1080" href="Relation.Nullary.Decidable.Core.html#1365" class="Function">True</a><a id="1084" class="Symbol">)</a>
<a id="1086" class="Keyword">open</a> <a id="1091" class="Keyword">import</a> <a id="1098" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1136" class="Keyword">using</a> <a id="1142" class="Symbol">(</a><a id="1143" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1146" class="Symbol">;</a> <a id="1148" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1152" class="Symbol">)</a>
<a id="1154" class="Keyword">open</a> <a id="1159" class="Keyword">import</a> <a id="1166" href="SMT.Script.Base.html" class="Module">SMT.Script.Base</a> <a id="1182" href="SMT.Theory.html#2422" class="Function">baseTheory</a>
<a id="1193" class="Keyword">open</a> <a id="1198" class="Keyword">import</a> <a id="1205" href="SMT.Script.Show.html" class="Module">SMT.Script.Show</a> <a id="1221" href="SMT.Script.Reflection.html#89" class="Bound">theory</a>
<a id="1228" class="Keyword">open</a> <a id="1233" class="Keyword">import</a> <a id="1240" href="SMT.Theories.Raw.html" class="Module">SMT.Theories.Raw</a> <a id="1257" class="Symbol">as</a> <a id="1260" class="Module">Raw</a> <a id="1264" class="Keyword">using</a> <a id="1270" class="Symbol">(</a><a id="1271" href="SMT.Theories.Raw.Base.html#3460" class="Function">showRawScript</a><a id="1284" class="Symbol">)</a>

<a id="1287" class="Keyword">private</a>
  <a id="1297" class="Keyword">variable</a>
    <a id="1310" href="SMT.Script.Reflection.html#1310" class="Generalizable">σ</a> <a id="1312" href="SMT.Script.Reflection.html#1312" class="Generalizable">σ′</a>    <a id="1318" class="Symbol">:</a> <a id="1320" href="SMT.Theory.html#1091" class="Function">Sort</a>
    <a id="1329" href="SMT.Script.Reflection.html#1329" class="Generalizable">Γ</a> <a id="1331" href="SMT.Script.Reflection.html#1331" class="Generalizable">Γ′</a> <a id="1334" href="SMT.Script.Reflection.html#1334" class="Generalizable">δΓ</a> <a id="1337" class="Symbol">:</a> <a id="1339" href="SMT.Script.Base.html#1084" class="Function">Ctxt</a>
    <a id="1348" href="SMT.Script.Reflection.html#1348" class="Generalizable">Δ</a> <a id="1350" href="SMT.Script.Reflection.html#1350" class="Generalizable">Δ′</a>    <a id="1356" class="Symbol">:</a> <a id="1358" href="SMT.Script.Base.html#1084" class="Function">Ctxt</a>
    <a id="1367" href="SMT.Script.Reflection.html#1367" class="Generalizable">Σ</a>       <a id="1375" class="Symbol">:</a> <a id="1377" href="SMT.Theory.html#484" class="Record">Signature</a> <a id="1387" href="SMT.Script.Reflection.html#1310" class="Generalizable">σ</a>
    <a id="1393" href="SMT.Script.Reflection.html#1393" class="Generalizable">Σ′</a>      <a id="1401" class="Symbol">:</a> <a id="1403" href="SMT.Theory.html#484" class="Record">Signature</a> <a id="1413" href="SMT.Script.Reflection.html#1312" class="Generalizable">σ′</a>
    <a id="1420" href="SMT.Script.Reflection.html#1420" class="Generalizable">ξ</a> <a id="1422" href="SMT.Script.Reflection.html#1422" class="Generalizable">ξ′</a>    <a id="1428" class="Symbol">:</a> <a id="1430" href="SMT.Script.Base.html#4768" class="Datatype">OutputType</a>
    <a id="1445" href="SMT.Script.Reflection.html#1445" class="Generalizable">Ξ</a> <a id="1447" href="SMT.Script.Reflection.html#1447" class="Generalizable">Ξ′</a> <a id="1450" href="SMT.Script.Reflection.html#1450" class="Generalizable">δΞ</a> <a id="1453" class="Symbol">:</a> <a id="1455" href="SMT.Script.Base.html#4862" class="Function">OutputCtxt</a>

<a id="1467" class="Comment">-- * Reflection hooks</a>

<a id="1490" class="Comment">-- TODO: The checkRawTerm and checkRawCommand functions should be rewritten to</a>
<a id="1569" class="Comment">--       infer their argument sort, as opposed to just trying all sorts.</a>
<a id="1642" class="Comment">--       Premature optimisation and all that, but the current approach is</a>
<a id="1716" class="Comment">--       exponential.</a>
<a id="1738" class="Keyword">module</a> <a id="1745" href="SMT.Script.Reflection.html#1745" class="Module">_</a> <a id="1747" class="Keyword">where</a>

  <a id="1756" class="Keyword">open</a> <a id="1761" class="Keyword">import</a> <a id="1768" href="SMT.Theories.Raw.html" class="Module">SMT.Theories.Raw</a>

  <a id="1788" class="Keyword">private</a>
    <a id="1800" href="SMT.Script.Reflection.html#1800" class="Function">monadPlusMaybe</a> <a id="1815" class="Symbol">=</a> <a id="1817" href="Data.Maybe.Categorical.html#1616" class="Function">MaybeCat.monadPlus</a> <a id="1836" class="Symbol">{</a><a id="1837" href="Agda.Primitive.html#764" class="Primitive">Level.zero</a><a id="1847" class="Symbol">}</a>

  <a id="1852" class="Keyword">open</a> <a id="1857" href="Category.Monad.html#1023" class="Module">RawMonadPlus</a> <a id="1870" href="SMT.Script.Reflection.html#1800" class="Function">monadPlusMaybe</a> <a id="1885" class="Keyword">renaming</a> <a id="1894" class="Symbol">(</a><a id="1895" href="Category.Applicative.Indexed.html#1034" class="Function Operator">_⊛_</a> <a id="1899" class="Symbol">to</a> <a id="1902" href="SMT.Script.Reflection.html#1902" class="Function Operator">_&lt;*&gt;_</a><a id="1907" class="Symbol">)</a>


  <a id="1913" class="Keyword">private</a>
    <a id="1925" class="Keyword">variable</a>
      <a id="1940" href="SMT.Script.Reflection.html#1940" class="Generalizable">Γᵣ</a> <a id="1943" href="SMT.Script.Reflection.html#1943" class="Generalizable">Γᵣ′</a> <a id="1947" href="SMT.Script.Reflection.html#1947" class="Generalizable">δΓᵣ</a> <a id="1951" class="Symbol">:</a> <a id="1953" href="SMT.Theories.Raw.Base.html#2675" class="Function">RawCtxt</a>
      <a id="1967" href="SMT.Script.Reflection.html#1967" class="Generalizable">Ξᵣ</a> <a id="1970" href="SMT.Script.Reflection.html#1970" class="Generalizable">Ξᵣ′</a> <a id="1974" href="SMT.Script.Reflection.html#1974" class="Generalizable">δΞᵣ</a> <a id="1978" class="Symbol">:</a> <a id="1980" href="SMT.Theories.Raw.Base.html#2631" class="Function">RawOutputCtxt</a>
      <a id="2000" href="SMT.Script.Reflection.html#2000" class="Generalizable">Δᵣ</a> <a id="2003" href="SMT.Script.Reflection.html#2003" class="Generalizable">Δᵣ′</a> <a id="2007" class="Symbol">:</a> <a id="2009" href="SMT.Theories.Raw.Base.html#2675" class="Function">RawCtxt</a>

  <a id="2020" href="SMT.Script.Reflection.html#2020" class="Function">checkRawVar</a> <a id="2032" class="Symbol">:</a> <a id="2034" class="Symbol">(</a><a id="2035" href="SMT.Script.Reflection.html#2035" class="Bound">Γ</a> <a id="2037" class="Symbol">:</a> <a id="2039" href="SMT.Script.Base.html#1084" class="Function">Ctxt</a><a id="2043" class="Symbol">)</a> <a id="2045" class="Symbol">(</a><a id="2046" href="SMT.Script.Reflection.html#2046" class="Bound">σ</a> <a id="2048" class="Symbol">:</a> <a id="2050" href="SMT.Theory.html#1091" class="Function">Sort</a><a id="2054" class="Symbol">)</a> <a id="2056" class="Symbol">(</a><a id="2057" href="SMT.Script.Reflection.html#2057" class="Bound">n</a> <a id="2059" class="Symbol">:</a> <a id="2061" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="2062" class="Symbol">)</a> <a id="2064" class="Symbol">→</a> <a id="2066" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2072" class="Symbol">(</a><a id="2073" href="SMT.Script.Reflection.html#2035" class="Bound">Γ</a> <a id="2075" href="SMT.Script.Base.html#1307" class="Function Operator">∋</a> <a id="2077" href="SMT.Script.Reflection.html#2046" class="Bound">σ</a><a id="2078" class="Symbol">)</a>
  <a id="2082" href="SMT.Script.Reflection.html#2020" class="Function">checkRawVar</a> <a id="2094" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="2103" href="SMT.Script.Reflection.html#2103" class="Bound">σ</a> <a id="2105" href="SMT.Script.Reflection.html#2105" class="Bound">n</a>       <a id="2113" class="Symbol">=</a> <a id="2115" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
  <a id="2125" href="SMT.Script.Reflection.html#2020" class="Function">checkRawVar</a> <a id="2137" class="Symbol">(</a><a id="2138" href="SMT.Script.Reflection.html#2138" class="Bound">σ′</a> <a id="2141" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2143" href="SMT.Script.Reflection.html#2143" class="Bound">Γ</a><a id="2144" class="Symbol">)</a> <a id="2146" href="SMT.Script.Reflection.html#2146" class="Bound">σ</a> <a id="2148" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="2156" class="Symbol">=</a> <a id="2158" class="Symbol">⦇</a> <a id="2160" class="Symbol">(</a><a id="2161" href="Data.Fin.Base.html#1160" class="InductiveConstructor">zero</a> <a id="2166" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="2168" class="Symbol">)</a> <a id="2170" class="Symbol">(</a><a id="2171" href="Data.Maybe.Base.html#1212" class="Function">Maybe.decToMaybe</a> <a id="2188" class="Symbol">(</a><a id="2189" href="SMT.Script.Reflection.html#2138" class="Bound">σ′</a> <a id="2192" href="SMT.Theory.html#1115" class="Function Operator">≟-Sort</a> <a id="2199" href="SMT.Script.Reflection.html#2146" class="Bound">σ</a><a id="2200" class="Symbol">))</a> <a id="2203" class="Symbol">⦈</a>
  <a id="2207" href="SMT.Script.Reflection.html#2020" class="Function">checkRawVar</a> <a id="2219" class="Symbol">(</a><a id="2220" href="SMT.Script.Reflection.html#2220" class="Bound">σ′</a> <a id="2223" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2225" href="SMT.Script.Reflection.html#2225" class="Bound">Γ</a><a id="2226" class="Symbol">)</a> <a id="2228" href="SMT.Script.Reflection.html#2228" class="Bound">σ</a> <a id="2230" class="Symbol">(</a><a id="2231" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2235" href="SMT.Script.Reflection.html#2235" class="Bound">n</a><a id="2236" class="Symbol">)</a> <a id="2238" class="Symbol">=</a> <a id="2240" class="Symbol">⦇</a> <a id="2242" href="SMT.Script.Base.html#2509" class="Function">extendVar</a> <a id="2252" class="Symbol">(</a><a id="2253" href="SMT.Script.Reflection.html#2020" class="Function">checkRawVar</a> <a id="2265" href="SMT.Script.Reflection.html#2225" class="Bound">Γ</a> <a id="2267" href="SMT.Script.Reflection.html#2228" class="Bound">σ</a> <a id="2269" href="SMT.Script.Reflection.html#2235" class="Bound">n</a><a id="2270" class="Symbol">)</a> <a id="2272" class="Symbol">⦈</a>

  <a id="2277" class="Keyword">mutual</a>
    <a id="2288" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="2301" class="Symbol">:</a> <a id="2303" class="Symbol">(</a><a id="2304" href="SMT.Script.Reflection.html#2304" class="Bound">Γ</a> <a id="2306" class="Symbol">:</a> <a id="2308" href="SMT.Script.Base.html#1084" class="Function">Ctxt</a><a id="2312" class="Symbol">)</a> <a id="2314" class="Symbol">(</a><a id="2315" href="SMT.Script.Reflection.html#2315" class="Bound">σ</a> <a id="2317" class="Symbol">:</a> <a id="2319" href="SMT.Theory.html#1091" class="Function">Sort</a><a id="2323" class="Symbol">)</a> <a id="2325" class="Symbol">{</a><a id="2326" href="SMT.Script.Reflection.html#2326" class="Bound">σᵣ</a> <a id="2329" class="Symbol">:</a> <a id="2331" href="SMT.Theories.Raw.Base.html#1007" class="Datatype">RawSort</a><a id="2338" class="Symbol">}</a> <a id="2340" class="Symbol">→</a> <a id="2342" href="SMT.Theories.Raw.Base.html#2748" class="Datatype">RawTerm</a> <a id="2350" href="SMT.Script.Reflection.html#1940" class="Generalizable">Γᵣ</a> <a id="2353" href="SMT.Script.Reflection.html#2326" class="Bound">σᵣ</a> <a id="2356" class="Symbol">→</a> <a id="2358" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2364" class="Symbol">(</a><a id="2365" href="SMT.Script.Base.html#1530" class="Datatype">Term</a> <a id="2370" href="SMT.Script.Reflection.html#2304" class="Bound">Γ</a> <a id="2372" href="SMT.Script.Reflection.html#2315" class="Bound">σ</a><a id="2373" class="Symbol">)</a>
    <a id="2379" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="2392" href="SMT.Script.Reflection.html#2392" class="Bound">Γ</a> <a id="2394" href="SMT.Script.Reflection.html#2394" class="Bound">σ</a> <a id="2396" class="Symbol">(</a><a id="2397" href="SMT.Theories.Raw.Base.html#2856" class="InductiveConstructor">appᵣ</a> <a id="2402" class="Symbol">(</a><a id="2403" class="Keyword">quote</a> <a id="2409" href="SMT.Theories.Raw.Reflection.html#3352" class="Function">rawVar</a><a id="2415" class="Symbol">)</a> <a id="2417" class="Symbol">(</a><a id="2418" href="SMT.Theories.Raw.Base.html#2786" class="InductiveConstructor">varᵣ</a> <a id="2423" href="SMT.Script.Reflection.html#2423" class="Bound">n</a> <a id="2425" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="2427" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a><a id="2429" class="Symbol">))</a> <a id="2432" class="Symbol">=</a> <a id="2434" class="Keyword">do</a>
      <a id="2443" href="SMT.Script.Reflection.html#2443" class="Bound">x</a> <a id="2445" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="2447" href="SMT.Script.Reflection.html#2020" class="Function">checkRawVar</a> <a id="2459" href="SMT.Script.Reflection.html#2392" class="Bound">Γ</a> <a id="2461" href="SMT.Script.Reflection.html#2394" class="Bound">σ</a> <a id="2463" class="Symbol">(</a><a id="2464" href="Data.Fin.Base.html#1264" class="Function">Fin.toℕ</a> <a id="2472" class="Symbol">(</a><a id="2473" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2479" href="SMT.Script.Reflection.html#2423" class="Bound">n</a><a id="2480" class="Symbol">))</a>
      <a id="2489" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="2496" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2498" href="SMT.Script.Base.html#1575" class="InductiveConstructor">var</a> <a id="2502" href="SMT.Script.Reflection.html#2443" class="Bound">x</a>
    <a id="2508" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="2521" href="SMT.Script.Reflection.html#2521" class="Bound">Γ</a> <a id="2523" href="SMT.Script.Reflection.html#2523" class="Bound">σ</a> <a id="2525" class="Symbol">(</a><a id="2526" href="SMT.Theories.Raw.Base.html#2786" class="InductiveConstructor">varᵣ</a> <a id="2531" href="SMT.Script.Reflection.html#2531" class="Bound">n</a><a id="2532" class="Symbol">)</a> <a id="2534" class="Symbol">=</a> <a id="2536" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a> <a id="2544" class="Comment">-- should be no naked variables</a>
    <a id="2580" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="2593" href="SMT.Script.Reflection.html#2593" class="Bound">Γ</a> <a id="2595" href="SMT.Script.Reflection.html#2595" class="Bound">σ</a> <a id="2597" class="Symbol">(</a><a id="2598" href="SMT.Theories.Raw.Base.html#2821" class="InductiveConstructor">litᵣ</a> <a id="2603" href="SMT.Script.Reflection.html#2603" class="Bound">l</a><a id="2604" class="Symbol">)</a> <a id="2606" class="Symbol">=</a> <a id="2608" class="Keyword">do</a>
      <a id="2617" href="SMT.Script.Reflection.html#2617" class="Bound">l</a> <a id="2619" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="2621" href="SMT.Theory.Reflection.html#450" class="Field">checkLiteral</a> <a id="2634" href="SMT.Script.Reflection.html#2595" class="Bound">σ</a> <a id="2636" href="SMT.Script.Reflection.html#2603" class="Bound">l</a>
      <a id="2644" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="2651" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2653" href="SMT.Script.Base.html#1617" class="InductiveConstructor">lit</a> <a id="2657" href="SMT.Script.Reflection.html#2617" class="Bound">l</a>
    <a id="2663" href="SMT.Script.Reflection.html#2288" class="CatchallClause Function">checkRawTerm</a><a id="2675" class="CatchallClause"> </a><a id="2676" href="SMT.Script.Reflection.html#2676" class="CatchallClause Bound">Γ</a><a id="2677" class="CatchallClause"> </a><a id="2678" href="SMT.Script.Reflection.html#2678" class="CatchallClause Bound">σ</a><a id="2679" class="CatchallClause"> </a><a id="2680" class="CatchallClause Symbol">(</a><a id="2681" href="SMT.Theories.Raw.Base.html#2856" class="CatchallClause InductiveConstructor">appᵣ</a><a id="2685" class="CatchallClause"> </a><a id="2686" href="SMT.Script.Reflection.html#2686" class="CatchallClause Bound">f</a><a id="2687" class="CatchallClause"> </a><a id="2688" href="SMT.Script.Reflection.html#2688" class="CatchallClause Bound">args</a><a id="2692" class="CatchallClause Symbol">)</a> <a id="2694" class="Symbol">=</a> <a id="2696" class="Keyword">do</a>
      <a id="2705" class="Symbol">(</a><a id="2706" href="SMT.Script.Reflection.html#2706" class="Bound">Σ</a> <a id="2708" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2710" href="SMT.Script.Reflection.html#2710" class="Bound">f</a><a id="2711" class="Symbol">)</a> <a id="2713" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="2715" href="SMT.Theory.Reflection.html#517" class="Field">checkIdentifier</a> <a id="2731" href="SMT.Script.Reflection.html#2678" class="Bound">σ</a> <a id="2733" href="SMT.Script.Reflection.html#2686" class="Bound">f</a>
      <a id="2741" href="SMT.Script.Reflection.html#2741" class="Bound">args</a> <a id="2746" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="2748" href="SMT.Script.Reflection.html#3283" class="Function">checkRawArgs</a> <a id="2761" href="SMT.Script.Reflection.html#2676" class="Bound">Γ</a> <a id="2763" class="Symbol">(</a><a id="2764" href="SMT.Theory.html#542" class="Field">ArgSorts</a> <a id="2773" href="SMT.Script.Reflection.html#2706" class="Bound">Σ</a><a id="2774" class="Symbol">)</a> <a id="2776" href="SMT.Script.Reflection.html#2688" class="Bound">args</a>
      <a id="2787" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="2794" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2796" href="SMT.Script.Reflection.html#2710" class="Bound">f</a> <a id="2798" href="SMT.Script.Reflection.html#2741" class="Bound">args</a>
    <a id="2807" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="2820" href="SMT.Script.Reflection.html#2820" class="Bound">Γ</a> <a id="2822" href="SMT.Script.Reflection.html#2822" class="Bound">σ</a> <a id="2824" class="Symbol">(</a><a id="2825" href="SMT.Theories.Raw.Base.html#2891" class="InductiveConstructor">forAllᵣ</a> <a id="2833" href="SMT.Script.Reflection.html#2833" class="Bound">σᵣ</a> <a id="2836" href="SMT.Script.Reflection.html#2836" class="Bound">x</a><a id="2837" class="Symbol">)</a> <a id="2839" class="Symbol">=</a> <a id="2841" class="Keyword">do</a>
      <a id="2850" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2855" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="2857" href="Data.Maybe.Base.html#1212" class="Function">Maybe.decToMaybe</a> <a id="2874" class="Symbol">(</a><a id="2875" href="SMT.Script.Reflection.html#2822" class="Bound">σ</a> <a id="2877" href="SMT.Theory.html#1115" class="Function Operator">≟-Sort</a> <a id="2884" href="SMT.Theory.html#1164" class="Function">BOOL</a><a id="2888" class="Symbol">)</a>
      <a id="2896" href="SMT.Script.Reflection.html#3036" class="Function">checkRawQ</a> <a id="2906" href="SMT.Script.Base.html#1757" class="InductiveConstructor">forAll</a> <a id="2913" href="SMT.Script.Reflection.html#2820" class="Bound">Γ</a> <a id="2915" href="SMT.Script.Reflection.html#2836" class="Bound">x</a>
    <a id="2921" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="2934" href="SMT.Script.Reflection.html#2934" class="Bound">Γ</a> <a id="2936" href="SMT.Script.Reflection.html#2936" class="Bound">σ</a> <a id="2938" class="Symbol">(</a><a id="2939" href="SMT.Theories.Raw.Base.html#2929" class="InductiveConstructor">existsᵣ</a> <a id="2947" href="SMT.Script.Reflection.html#2947" class="Bound">σᵣ</a> <a id="2950" href="SMT.Script.Reflection.html#2950" class="Bound">x</a><a id="2951" class="Symbol">)</a> <a id="2953" class="Symbol">=</a> <a id="2955" class="Keyword">do</a>
      <a id="2964" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2969" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="2971" href="Data.Maybe.Base.html#1212" class="Function">Maybe.decToMaybe</a> <a id="2988" class="Symbol">(</a><a id="2989" href="SMT.Script.Reflection.html#2936" class="Bound">σ</a> <a id="2991" href="SMT.Theory.html#1115" class="Function Operator">≟-Sort</a> <a id="2998" href="SMT.Theory.html#1164" class="Function">BOOL</a><a id="3002" class="Symbol">)</a>
      <a id="3010" href="SMT.Script.Reflection.html#3036" class="Function">checkRawQ</a> <a id="3020" href="SMT.Script.Base.html#1821" class="InductiveConstructor">exists</a> <a id="3027" href="SMT.Script.Reflection.html#2934" class="Bound">Γ</a> <a id="3029" href="SMT.Script.Reflection.html#2950" class="Bound">x</a>

    <a id="3036" href="SMT.Script.Reflection.html#3036" class="Function">checkRawQ</a> <a id="3046" class="Symbol">:</a> <a id="3048" class="Symbol">(</a><a id="3049" href="SMT.Script.Reflection.html#3049" class="Bound">q</a> <a id="3051" class="Symbol">:</a> <a id="3053" class="Symbol">∀</a> <a id="3055" class="Symbol">{</a><a id="3056" href="SMT.Script.Reflection.html#3056" class="Bound">Γ</a><a id="3057" class="Symbol">}</a> <a id="3059" href="SMT.Script.Reflection.html#3059" class="Bound">σ</a> <a id="3061" class="Symbol">→</a> <a id="3063" href="SMT.Script.Base.html#1530" class="Datatype">Term</a> <a id="3068" class="Symbol">(</a><a id="3069" href="SMT.Script.Reflection.html#3059" class="Bound">σ</a> <a id="3071" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3073" href="SMT.Script.Reflection.html#3056" class="Bound">Γ</a><a id="3074" class="Symbol">)</a> <a id="3076" href="SMT.Theory.html#1164" class="Function">BOOL</a> <a id="3081" class="Symbol">→</a> <a id="3083" href="SMT.Script.Base.html#1530" class="Datatype">Term</a> <a id="3088" href="SMT.Script.Reflection.html#3056" class="Bound">Γ</a> <a id="3090" href="SMT.Theory.html#1164" class="Function">BOOL</a><a id="3094" class="Symbol">)</a> <a id="3096" class="Symbol">(</a><a id="3097" href="SMT.Script.Reflection.html#3097" class="Bound">Γ</a> <a id="3099" class="Symbol">:</a> <a id="3101" href="SMT.Script.Base.html#1084" class="Function">Ctxt</a><a id="3105" class="Symbol">)</a> <a id="3107" class="Symbol">→</a> <a id="3109" href="SMT.Theories.Raw.Base.html#2748" class="Datatype">RawTerm</a> <a id="3117" href="SMT.Script.Reflection.html#1940" class="Generalizable">Γᵣ</a> <a id="3120" href="SMT.Theories.Raw.Base.html#1029" class="InductiveConstructor">⋆</a> <a id="3122" class="Symbol">→</a> <a id="3124" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3130" class="Symbol">(</a><a id="3131" href="SMT.Script.Base.html#1530" class="Datatype">Term</a> <a id="3136" href="SMT.Script.Reflection.html#3097" class="Bound">Γ</a> <a id="3138" href="SMT.Theory.html#1164" class="Function">BOOL</a><a id="3142" class="Symbol">)</a>
    <a id="3148" href="SMT.Script.Reflection.html#3036" class="Function">checkRawQ</a> <a id="3158" href="SMT.Script.Reflection.html#3158" class="Bound">q</a> <a id="3160" href="SMT.Script.Reflection.html#3160" class="Bound">Γ</a> <a id="3162" href="SMT.Script.Reflection.html#3162" class="Bound">x</a>
      <a id="3170" class="Symbol">=</a> <a id="3172" href="Data.List.Base.html#3905" class="Function">List.foldr</a> <a id="3183" href="Data.Maybe.Base.html#2335" class="Function Operator">Maybe._&lt;∣&gt;_</a> <a id="3195" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
      <a id="3209" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3211" href="Data.List.Base.html#1497" class="Function">List.map</a> <a id="3220" class="Symbol">(λ</a> <a id="3223" href="SMT.Script.Reflection.html#3223" class="Bound">σ′</a> <a id="3226" class="Symbol">→</a> <a id="3228" class="Symbol">⦇</a> <a id="3230" class="Symbol">(</a><a id="3231" href="SMT.Script.Reflection.html#3158" class="Bound">q</a> <a id="3233" href="SMT.Script.Reflection.html#3223" class="Bound">σ′</a><a id="3235" class="Symbol">)</a> <a id="3237" class="Symbol">(</a><a id="3238" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="3251" class="Symbol">(</a><a id="3252" href="SMT.Script.Reflection.html#3223" class="Bound">σ′</a> <a id="3255" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3257" href="SMT.Script.Reflection.html#3160" class="Bound">Γ</a><a id="3258" class="Symbol">)</a> <a id="3260" href="SMT.Theory.html#1164" class="Function">BOOL</a> <a id="3265" href="SMT.Script.Reflection.html#3162" class="Bound">x</a><a id="3266" class="Symbol">)</a> <a id="3268" class="Symbol">⦈</a> <a id="3270" class="Symbol">)</a> <a id="3272" href="SMT.Theory.Reflection.html#374" class="Field">sorts</a>

    <a id="3283" href="SMT.Script.Reflection.html#3283" class="Function">checkRawArgs</a> <a id="3296" class="Symbol">:</a> <a id="3298" class="Symbol">(</a><a id="3299" href="SMT.Script.Reflection.html#3299" class="Bound">Γ</a> <a id="3301" href="SMT.Script.Reflection.html#3301" class="Bound">Δ</a> <a id="3303" class="Symbol">:</a> <a id="3305" href="SMT.Script.Base.html#1084" class="Function">Ctxt</a><a id="3309" class="Symbol">)</a> <a id="3311" class="Symbol">→</a> <a id="3313" href="SMT.Theories.Raw.Base.html#2967" class="Function">RawArgs</a> <a id="3321" href="SMT.Script.Reflection.html#1940" class="Generalizable">Γᵣ</a> <a id="3324" href="SMT.Script.Reflection.html#2000" class="Generalizable">Δᵣ</a> <a id="3327" class="Symbol">→</a> <a id="3329" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3335" class="Symbol">(</a><a id="3336" href="SMT.Script.Base.html#1884" class="Function">Args</a> <a id="3341" href="SMT.Script.Reflection.html#3299" class="Bound">Γ</a> <a id="3343" href="SMT.Script.Reflection.html#3301" class="Bound">Δ</a><a id="3344" class="Symbol">)</a>
    <a id="3350" href="SMT.Script.Reflection.html#3283" class="Function">checkRawArgs</a> <a id="3363" href="SMT.Script.Reflection.html#3363" class="Bound">Γ</a> <a id="3365" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>      <a id="3373" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a>           <a id="3386" class="Symbol">=</a> <a id="3388" class="Symbol">⦇</a> <a id="3390" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a> <a id="3393" class="Symbol">⦈</a>
    <a id="3399" href="SMT.Script.Reflection.html#3283" class="Function">checkRawArgs</a> <a id="3412" href="SMT.Script.Reflection.html#3412" class="Bound">Γ</a> <a id="3414" class="Symbol">(</a><a id="3415" href="SMT.Script.Reflection.html#3415" class="Bound">σ</a> <a id="3417" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3419" href="SMT.Script.Reflection.html#3419" class="Bound">Δ</a><a id="3420" class="Symbol">)</a> <a id="3422" class="Symbol">(</a><a id="3423" href="SMT.Script.Reflection.html#3423" class="Bound">arg</a> <a id="3427" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="3429" href="SMT.Script.Reflection.html#3429" class="Bound">args</a><a id="3433" class="Symbol">)</a> <a id="3435" class="Symbol">=</a> <a id="3437" class="Symbol">⦇</a> <a id="3439" class="Symbol">(</a><a id="3440" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="3453" href="SMT.Script.Reflection.html#3412" class="Bound">Γ</a> <a id="3455" href="SMT.Script.Reflection.html#3415" class="Bound">σ</a> <a id="3457" href="SMT.Script.Reflection.html#3423" class="Bound">arg</a><a id="3460" class="Symbol">)</a> <a id="3462" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="3464" class="Symbol">(</a><a id="3465" href="SMT.Script.Reflection.html#3283" class="Function">checkRawArgs</a> <a id="3478" href="SMT.Script.Reflection.html#3412" class="Bound">Γ</a> <a id="3480" href="SMT.Script.Reflection.html#3419" class="Bound">Δ</a> <a id="3482" href="SMT.Script.Reflection.html#3429" class="Bound">args</a><a id="3486" class="Symbol">)</a> <a id="3488" class="Symbol">⦈</a>
    <a id="3494" href="SMT.Script.Reflection.html#3283" class="CatchallClause Function">checkRawArgs</a><a id="3506" class="CatchallClause"> </a><a id="3507" class="CatchallClause Symbol">_</a><a id="3508" class="CatchallClause"> </a><a id="3509" class="CatchallClause Symbol">_</a><a id="3510" class="CatchallClause">       </a><a id="3517" class="CatchallClause Symbol">_</a>            <a id="3530" class="Symbol">=</a> <a id="3532" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>


  <a id="3544" href="SMT.Script.Reflection.html#3544" class="Function Operator">Script[_↦_,_↦_,_↦_]</a> <a id="3564" class="Symbol">:</a>
    <a id="3570" class="Symbol">(</a><a id="3571" href="SMT.Script.Reflection.html#3571" class="Bound">Γᵣ</a>  <a id="3575" class="Symbol">:</a> <a id="3577" href="SMT.Theories.Raw.Base.html#2675" class="Function">RawCtxt</a><a id="3584" class="Symbol">)</a>       <a id="3592" class="Symbol">(</a><a id="3593" href="SMT.Script.Reflection.html#3593" class="Bound">Γ</a>  <a id="3596" class="Symbol">:</a> <a id="3598" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="3602" href="SMT.Theory.html#1091" class="Function">Sort</a> <a id="3607" class="Symbol">(</a><a id="3608" href="Data.List.Base.html#4577" class="Function">length</a> <a id="3615" href="SMT.Script.Reflection.html#3571" class="Bound">Γᵣ</a><a id="3617" class="Symbol">))</a>
    <a id="3624" class="Symbol">(</a><a id="3625" href="SMT.Script.Reflection.html#3625" class="Bound">Γᵣ′</a> <a id="3629" class="Symbol">:</a> <a id="3631" href="SMT.Theories.Raw.Base.html#2675" class="Function">RawCtxt</a><a id="3638" class="Symbol">)</a>       <a id="3646" class="Symbol">(</a><a id="3647" href="SMT.Script.Reflection.html#3647" class="Bound">Γ′</a> <a id="3650" class="Symbol">:</a> <a id="3652" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="3656" href="SMT.Theory.html#1091" class="Function">Sort</a> <a id="3661" class="Symbol">(</a><a id="3662" href="Data.List.Base.html#4577" class="Function">length</a> <a id="3669" href="SMT.Script.Reflection.html#3625" class="Bound">Γᵣ′</a><a id="3672" class="Symbol">))</a>
    <a id="3679" class="Symbol">(</a><a id="3680" href="SMT.Script.Reflection.html#3680" class="Bound">Ξᵣ</a>  <a id="3684" class="Symbol">:</a> <a id="3686" href="SMT.Theories.Raw.Base.html#2631" class="Function">RawOutputCtxt</a><a id="3699" class="Symbol">)</a> <a id="3701" class="Symbol">(</a><a id="3702" href="SMT.Script.Reflection.html#3702" class="Bound">Ξ</a>  <a id="3705" class="Symbol">:</a> <a id="3707" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="3711" href="SMT.Script.Base.html#4768" class="Datatype">OutputType</a> <a id="3722" class="Symbol">(</a><a id="3723" href="Data.List.Base.html#4577" class="Function">length</a> <a id="3730" href="SMT.Script.Reflection.html#3680" class="Bound">Ξᵣ</a><a id="3732" class="Symbol">))</a> <a id="3735" class="Symbol">→</a> <a id="3737" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="3743" href="SMT.Script.Reflection.html#3544" class="Function Operator">Script[</a> <a id="3751" class="Symbol">_</a> <a id="3753" href="SMT.Script.Reflection.html#3544" class="Function Operator">↦</a> <a id="3755" href="SMT.Script.Reflection.html#3755" class="Bound">Γ</a> <a id="3757" href="SMT.Script.Reflection.html#3544" class="Function Operator">,</a> <a id="3759" class="Symbol">_</a> <a id="3761" href="SMT.Script.Reflection.html#3544" class="Function Operator">↦</a> <a id="3763" href="SMT.Script.Reflection.html#3763" class="Bound">Γ′</a> <a id="3766" href="SMT.Script.Reflection.html#3544" class="Function Operator">,</a> <a id="3768" class="Symbol">_</a> <a id="3770" href="SMT.Script.Reflection.html#3544" class="Function Operator">↦</a> <a id="3772" href="SMT.Script.Reflection.html#3772" class="Bound">Ξ</a> <a id="3774" href="SMT.Script.Reflection.html#3544" class="Function Operator">]</a> <a id="3776" class="Symbol">=</a> <a id="3778" href="SMT.Script.Base.html#9217" class="Datatype">Script</a> <a id="3785" class="Symbol">(</a><a id="3786" href="Data.Vec.Base.html#7399" class="Function">Vec.toList</a> <a id="3797" href="SMT.Script.Reflection.html#3755" class="Bound">Γ</a><a id="3798" class="Symbol">)</a> <a id="3800" class="Symbol">(</a><a id="3801" href="Data.Vec.Base.html#7399" class="Function">Vec.toList</a> <a id="3812" href="SMT.Script.Reflection.html#3763" class="Bound">Γ′</a><a id="3814" class="Symbol">)</a> <a id="3816" class="Symbol">(</a><a id="3817" href="Data.Vec.Base.html#7399" class="Function">Vec.toList</a> <a id="3828" href="SMT.Script.Reflection.html#3772" class="Bound">Ξ</a><a id="3829" class="Symbol">)</a>

  <a id="3834" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="3849" class="Symbol">:</a> <a id="3851" class="Symbol">{</a><a id="3852" href="SMT.Script.Reflection.html#3852" class="Bound">Γᵣ</a> <a id="3855" href="SMT.Script.Reflection.html#3855" class="Bound">Γᵣ′</a> <a id="3859" class="Symbol">:</a> <a id="3861" href="SMT.Theories.Raw.Base.html#2675" class="Function">RawCtxt</a><a id="3868" class="Symbol">}</a> <a id="3870" class="Symbol">{</a><a id="3871" href="SMT.Script.Reflection.html#3871" class="Bound">Ξᵣ</a> <a id="3874" class="Symbol">:</a> <a id="3876" href="SMT.Theories.Raw.Base.html#2631" class="Function">RawOutputCtxt</a><a id="3889" class="Symbol">}</a>
    <a id="3895" class="Symbol">→</a> <a id="3897" class="Symbol">(</a><a id="3898" href="SMT.Script.Reflection.html#3898" class="Bound">Γ</a> <a id="3900" class="Symbol">:</a> <a id="3902" href="Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="3906" href="SMT.Theory.html#1091" class="Function">Sort</a> <a id="3911" class="Symbol">(</a><a id="3912" href="Data.List.Base.html#4577" class="Function">length</a> <a id="3919" href="SMT.Script.Reflection.html#3852" class="Bound">Γᵣ</a><a id="3921" class="Symbol">))</a>
    <a id="3928" class="Symbol">→</a> <a id="3930" href="SMT.Theories.Raw.Base.html#3252" class="Datatype">RawScript</a> <a id="3940" href="SMT.Script.Reflection.html#3852" class="Bound">Γᵣ</a> <a id="3943" href="SMT.Script.Reflection.html#3855" class="Bound">Γᵣ′</a> <a id="3947" href="SMT.Script.Reflection.html#3871" class="Bound">Ξᵣ</a>
    <a id="3954" class="Symbol">→</a> <a id="3956" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3962" class="Symbol">(</a><a id="3963" href="Data.Product.html#1788" class="Function">∃[</a> <a id="3966" href="SMT.Script.Reflection.html#3966" class="Bound">Γ′</a> <a id="3969" href="Data.Product.html#1788" class="Function">]</a> <a id="3971" href="Data.Product.html#1788" class="Function">∃[</a> <a id="3974" href="SMT.Script.Reflection.html#3974" class="Bound">Ξ</a> <a id="3976" href="Data.Product.html#1788" class="Function">]</a> <a id="3978" href="SMT.Script.Reflection.html#3544" class="Function Operator">Script[</a> <a id="3986" href="SMT.Script.Reflection.html#3852" class="Bound">Γᵣ</a> <a id="3989" href="SMT.Script.Reflection.html#3544" class="Function Operator">↦</a> <a id="3991" href="SMT.Script.Reflection.html#3898" class="Bound">Γ</a> <a id="3993" href="SMT.Script.Reflection.html#3544" class="Function Operator">,</a> <a id="3995" href="SMT.Script.Reflection.html#3855" class="Bound">Γᵣ′</a> <a id="3999" href="SMT.Script.Reflection.html#3544" class="Function Operator">↦</a> <a id="4001" href="SMT.Script.Reflection.html#3966" class="Bound">Γ′</a> <a id="4004" href="SMT.Script.Reflection.html#3544" class="Function Operator">,</a> <a id="4006" href="SMT.Script.Reflection.html#3871" class="Bound">Ξᵣ</a> <a id="4009" href="SMT.Script.Reflection.html#3544" class="Function Operator">↦</a> <a id="4011" href="SMT.Script.Reflection.html#3974" class="Bound">Ξ</a> <a id="4013" href="SMT.Script.Reflection.html#3544" class="Function Operator">]</a><a id="4014" class="Symbol">)</a>
  <a id="4018" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4033" class="Symbol">{</a><a id="4034" href="SMT.Script.Reflection.html#4034" class="Bound">Γᵣ</a><a id="4036" class="Symbol">}</a> <a id="4038" class="Symbol">{</a><a id="4039" class="DottedPattern Symbol">.</a><a id="4040" class="DottedPattern">Γᵣ</a><a id="4042" class="Symbol">}</a> <a id="4044" class="Symbol">{</a><a id="4045" class="DottedPattern Symbol">.</a><a id="4046" href="Agda.Builtin.List.html#185" class="DottedPattern InductiveConstructor">[]</a><a id="4048" class="Symbol">}</a> <a id="4050" href="SMT.Script.Reflection.html#4050" class="Bound">Γ</a> <a id="4052" href="SMT.Theories.Raw.Base.html#3292" class="InductiveConstructor">[]ᵣ</a> <a id="4056" class="Symbol">=</a>
    <a id="4062" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="4069" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4071" href="SMT.Script.Reflection.html#4050" class="Bound">Γ</a> <a id="4073" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4075" href="Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="4078" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4080" href="SMT.Script.Base.html#9280" class="InductiveConstructor">[]</a>
  <a id="4085" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4100" href="SMT.Script.Reflection.html#4100" class="Bound">Γ</a> <a id="4102" class="Symbol">(</a><a id="4103" href="SMT.Theories.Raw.Base.html#3046" class="InductiveConstructor">set-logicᵣ</a> <a id="4114" href="SMT.Script.Reflection.html#4114" class="Bound">l</a> <a id="4116" href="SMT.Theories.Raw.Base.html#3326" class="InductiveConstructor Operator">∷ᵣ</a> <a id="4119" href="SMT.Script.Reflection.html#4119" class="Bound">scr</a><a id="4122" class="Symbol">)</a> <a id="4124" class="Symbol">=</a> <a id="4126" class="Keyword">do</a>
    <a id="4133" class="Symbol">(</a><a id="4134" href="SMT.Script.Reflection.html#4134" class="Bound">Γ′</a> <a id="4137" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4139" href="SMT.Script.Reflection.html#4139" class="Bound">Ξ</a> <a id="4141" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4143" href="SMT.Script.Reflection.html#4143" class="Bound">scr</a><a id="4146" class="Symbol">)</a> <a id="4148" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4150" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4165" href="SMT.Script.Reflection.html#4100" class="Bound">Γ</a> <a id="4167" href="SMT.Script.Reflection.html#4119" class="Bound">scr</a>
    <a id="4175" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="4182" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4184" href="SMT.Script.Reflection.html#4134" class="Bound">Γ′</a> <a id="4187" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4189" href="SMT.Script.Reflection.html#4139" class="Bound">Ξ</a> <a id="4191" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4193" class="Symbol">(</a><a id="4194" href="SMT.Script.Base.html#8874" class="InductiveConstructor">set-logic</a> <a id="4204" href="SMT.Script.Reflection.html#4114" class="Bound">l</a> <a id="4206" href="SMT.Script.Base.html#9302" class="InductiveConstructor Operator">∷</a> <a id="4208" href="SMT.Script.Reflection.html#4143" class="Bound">scr</a><a id="4211" class="Symbol">)</a>
  <a id="4215" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4230" href="SMT.Script.Reflection.html#4230" class="Bound">Γ</a> <a id="4232" class="Symbol">(</a><a id="4233" href="SMT.Theories.Raw.Base.html#3087" class="InductiveConstructor">declare-constᵣ</a> <a id="4248" class="Symbol">_</a> <a id="4250" href="SMT.Theories.Raw.Base.html#1029" class="InductiveConstructor">⋆</a> <a id="4252" href="SMT.Script.Base.html#9302" class="InductiveConstructor Operator">∷</a> <a id="4254" class="Symbol">_)</a> <a id="4257" class="Symbol">=</a> <a id="4259" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a> <a id="4267" class="Comment">-- we never declare constants of type ⋆</a>
  <a id="4309" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4324" href="SMT.Script.Reflection.html#4324" class="Bound">Γ</a> <a id="4326" class="Symbol">(</a><a id="4327" href="SMT.Theories.Raw.Base.html#3087" class="InductiveConstructor">declare-constᵣ</a> <a id="4342" href="SMT.Script.Reflection.html#4342" class="Bound">x</a> <a id="4344" class="Symbol">(</a><a id="4345" href="SMT.Theories.Raw.Base.html#1046" class="InductiveConstructor">TERM</a> <a id="4350" href="SMT.Script.Reflection.html#4350" class="Bound">σᵣ</a><a id="4352" class="Symbol">)</a> <a id="4354" href="SMT.Theories.Raw.Base.html#3326" class="InductiveConstructor Operator">∷ᵣ</a> <a id="4357" href="SMT.Script.Reflection.html#4357" class="Bound">scr</a><a id="4360" class="Symbol">)</a> <a id="4362" class="Symbol">=</a> <a id="4364" class="Keyword">do</a>
    <a id="4371" href="SMT.Script.Reflection.html#4371" class="Bound">σ</a> <a id="4373" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4375" href="SMT.Theory.Reflection.html#406" class="Field">checkSort</a> <a id="4385" href="SMT.Script.Reflection.html#4350" class="Bound">σᵣ</a>
    <a id="4392" href="SMT.Script.Reflection.html#4392" class="Bound">Γ′</a> <a id="4395" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4397" href="SMT.Script.Reflection.html#4397" class="Bound">Ξ</a> <a id="4399" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4401" href="SMT.Script.Reflection.html#4401" class="Bound">scr</a> <a id="4405" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4407" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4422" class="Symbol">(</a><a id="4423" href="SMT.Script.Reflection.html#4371" class="Bound">σ</a> <a id="4425" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="4427" href="SMT.Script.Reflection.html#4324" class="Bound">Γ</a><a id="4428" class="Symbol">)</a> <a id="4430" href="SMT.Script.Reflection.html#4357" class="Bound">scr</a>
    <a id="4438" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="4445" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4447" href="SMT.Script.Reflection.html#4392" class="Bound">Γ′</a> <a id="4450" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4452" href="SMT.Script.Reflection.html#4397" class="Bound">Ξ</a> <a id="4454" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4456" class="Symbol">(</a><a id="4457" href="SMT.Script.Base.html#8922" class="InductiveConstructor">declare-const</a> <a id="4471" href="SMT.Script.Reflection.html#4342" class="Bound">x</a> <a id="4473" href="SMT.Script.Reflection.html#4371" class="Bound">σ</a> <a id="4475" href="SMT.Script.Base.html#9302" class="InductiveConstructor Operator">∷</a> <a id="4477" href="SMT.Script.Reflection.html#4401" class="Bound">scr</a><a id="4480" class="Symbol">)</a>
  <a id="4484" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4499" href="SMT.Script.Reflection.html#4499" class="Bound">Γ</a> <a id="4501" class="Symbol">(</a><a id="4502" href="SMT.Theories.Raw.Base.html#3132" class="InductiveConstructor">assertᵣ</a> <a id="4510" href="SMT.Script.Reflection.html#4510" class="Bound">x</a> <a id="4512" href="SMT.Theories.Raw.Base.html#3326" class="InductiveConstructor Operator">∷ᵣ</a> <a id="4515" href="SMT.Script.Reflection.html#4515" class="Bound">scr</a><a id="4518" class="Symbol">)</a> <a id="4520" class="Symbol">=</a> <a id="4522" class="Keyword">do</a>
    <a id="4529" href="SMT.Script.Reflection.html#4529" class="Bound">x</a> <a id="4531" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4533" class="Symbol">(</a><a id="4534" href="SMT.Script.Reflection.html#2288" class="Function">checkRawTerm</a> <a id="4547" class="Symbol">(</a><a id="4548" href="Data.Vec.Base.html#7399" class="Function">Vec.toList</a> <a id="4559" href="SMT.Script.Reflection.html#4499" class="Bound">Γ</a><a id="4560" class="Symbol">)</a> <a id="4562" href="SMT.Theory.html#1164" class="Function">BOOL</a> <a id="4567" href="SMT.Script.Reflection.html#4510" class="Bound">x</a><a id="4568" class="Symbol">)</a>
    <a id="4574" class="Symbol">(</a><a id="4575" href="SMT.Script.Reflection.html#4575" class="Bound">Γ′</a> <a id="4578" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4580" href="SMT.Script.Reflection.html#4580" class="Bound">Ξ</a> <a id="4582" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4584" href="SMT.Script.Reflection.html#4584" class="Bound">scr</a><a id="4587" class="Symbol">)</a> <a id="4589" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4591" class="Symbol">(</a><a id="4592" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4607" href="SMT.Script.Reflection.html#4499" class="Bound">Γ</a> <a id="4609" href="SMT.Script.Reflection.html#4515" class="Bound">scr</a><a id="4612" class="Symbol">)</a>
    <a id="4618" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="4625" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4627" href="SMT.Script.Reflection.html#4575" class="Bound">Γ′</a> <a id="4630" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4632" href="SMT.Script.Reflection.html#4580" class="Bound">Ξ</a> <a id="4634" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4636" class="Symbol">(</a><a id="4637" href="SMT.Script.Base.html#8988" class="InductiveConstructor">assert</a> <a id="4644" href="SMT.Script.Reflection.html#4529" class="Bound">x</a> <a id="4646" href="SMT.Script.Base.html#9302" class="InductiveConstructor Operator">∷</a> <a id="4648" href="SMT.Script.Reflection.html#4584" class="Bound">scr</a><a id="4651" class="Symbol">)</a>
  <a id="4655" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4670" href="SMT.Script.Reflection.html#4670" class="Bound">Γ</a> <a id="4672" class="Symbol">(</a><a id="4673" href="SMT.Theories.Raw.Base.html#3170" class="InductiveConstructor">check-satᵣ</a> <a id="4684" href="SMT.Theories.Raw.Base.html#3326" class="InductiveConstructor Operator">∷ᵣ</a> <a id="4687" href="SMT.Script.Reflection.html#4687" class="Bound">scr</a><a id="4690" class="Symbol">)</a> <a id="4692" class="Symbol">=</a> <a id="4694" class="Keyword">do</a>
    <a id="4701" class="Symbol">(</a><a id="4702" href="SMT.Script.Reflection.html#4702" class="Bound">Γ′</a> <a id="4705" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4707" href="SMT.Script.Reflection.html#4707" class="Bound">Ξ</a> <a id="4709" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4711" href="SMT.Script.Reflection.html#4711" class="Bound">scr</a><a id="4714" class="Symbol">)</a> <a id="4716" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4718" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4733" href="SMT.Script.Reflection.html#4670" class="Bound">Γ</a> <a id="4735" href="SMT.Script.Reflection.html#4687" class="Bound">scr</a>
    <a id="4743" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="4750" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4752" href="SMT.Script.Reflection.html#4702" class="Bound">Γ′</a> <a id="4755" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4757" href="SMT.Script.Base.html#4793" class="InductiveConstructor">SAT</a> <a id="4761" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="4763" href="SMT.Script.Reflection.html#4707" class="Bound">Ξ</a> <a id="4765" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4767" class="Symbol">(</a><a id="4768" href="SMT.Script.Base.html#9036" class="InductiveConstructor">check-sat</a> <a id="4778" href="SMT.Script.Base.html#9302" class="InductiveConstructor Operator">∷</a> <a id="4780" href="SMT.Script.Reflection.html#4711" class="Bound">scr</a><a id="4783" class="Symbol">)</a>
  <a id="4787" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4802" href="SMT.Script.Reflection.html#4802" class="Bound">Γ</a> <a id="4804" class="Symbol">(</a><a id="4805" href="SMT.Theories.Raw.Base.html#3211" class="InductiveConstructor">get-modelᵣ</a> <a id="4816" href="SMT.Theories.Raw.Base.html#3326" class="InductiveConstructor Operator">∷ᵣ</a> <a id="4819" href="SMT.Script.Reflection.html#4819" class="Bound">scr</a><a id="4822" class="Symbol">)</a> <a id="4824" class="Symbol">=</a> <a id="4826" class="Keyword">do</a>
    <a id="4833" class="Symbol">(</a><a id="4834" href="SMT.Script.Reflection.html#4834" class="Bound">Γ′</a> <a id="4837" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4839" href="SMT.Script.Reflection.html#4839" class="Bound">Ξ</a> <a id="4841" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4843" href="SMT.Script.Reflection.html#4843" class="Bound">scr</a><a id="4846" class="Symbol">)</a> <a id="4848" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="4850" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="4865" href="SMT.Script.Reflection.html#4802" class="Bound">Γ</a> <a id="4867" href="SMT.Script.Reflection.html#4819" class="Bound">scr</a>
    <a id="4875" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="4882" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4884" href="SMT.Script.Reflection.html#4834" class="Bound">Γ′</a> <a id="4887" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4889" href="SMT.Script.Base.html#4814" class="InductiveConstructor">MODEL</a> <a id="4895" class="Symbol">(</a><a id="4896" href="Data.Vec.Base.html#7399" class="Function">Vec.toList</a> <a id="4907" href="SMT.Script.Reflection.html#4802" class="Bound">Γ</a><a id="4908" class="Symbol">)</a> <a id="4910" href="Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="4912" href="SMT.Script.Reflection.html#4839" class="Bound">Ξ</a> <a id="4914" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4916" class="Symbol">(</a><a id="4917" href="SMT.Script.Base.html#9078" class="InductiveConstructor">get-model</a> <a id="4927" href="SMT.Script.Base.html#9302" class="InductiveConstructor Operator">∷</a> <a id="4929" href="SMT.Script.Reflection.html#4843" class="Bound">scr</a><a id="4932" class="Symbol">)</a>

<a id="4935" class="Keyword">module</a> <a id="4942" href="SMT.Script.Reflection.html#4942" class="Module">_</a> <a id="4944" class="Keyword">where</a>

  <a id="4953" class="Keyword">open</a> <a id="4958" class="Keyword">import</a> <a id="4965" href="SMT.Theories.Raw.Reflection.html" class="Module">SMT.Theories.Raw.Reflection</a>
  <a id="4995" class="Keyword">import</a> <a id="5002" href="Reflection.TypeChecking.Monad.Categorical.html" class="Module">Reflection.TypeChecking.Monad.Categorical</a> <a id="5044" class="Symbol">as</a> <a id="5047" class="Module">TC</a>

  <a id="5053" class="Keyword">private</a>
    <a id="5065" class="Keyword">open</a> <a id="5070" class="Keyword">module</a> <a id="TCMonad"></a><a id="5077" href="SMT.Script.Reflection.html#5077" class="Module">TCMonad</a> <a id="5085" class="Symbol">{</a><a id="5086" href="SMT.Script.Reflection.html#5086" class="Bound">ℓ</a><a id="5087" class="Symbol">}</a> <a id="5089" class="Symbol">=</a> <a id="5091" href="Category.Monad.html#832" class="Module">Category.Monad.RawMonad</a> <a id="5115" class="Symbol">{</a><a id="5116" href="SMT.Script.Reflection.html#5086" class="Bound">ℓ</a><a id="5117" class="Symbol">}</a> <a id="5119" href="Reflection.TypeChecking.Monad.Categorical.html#1061" class="Function">TC.monad</a> <a id="5128" class="Keyword">renaming</a> <a id="5137" class="Symbol">(</a><a id="5138" href="Category.Applicative.Indexed.html#1034" class="Function Operator">_⊛_</a> <a id="5142" class="Symbol">to</a> <a id="5145" href="SMT.Script.Reflection.html#5145" class="Function Operator">_&lt;*&gt;_</a><a id="5150" class="Symbol">)</a>

  <a id="5155" href="SMT.Script.Reflection.html#5155" class="Function">reflectToScript</a> <a id="5171" class="Symbol">:</a> <a id="5173" href="Agda.Builtin.Reflection.html#4246" class="Datatype">Rfl.Term</a> <a id="5182" class="Symbol">→</a> <a id="5184" href="Agda.Builtin.Reflection.html#7500" class="Postulate">Rfl.TC</a> <a id="5191" class="Symbol">(</a><a id="5192" href="Data.Product.html#1788" class="Function">∃[</a> <a id="5195" href="SMT.Script.Reflection.html#5195" class="Bound">Γ</a> <a id="5197" href="Data.Product.html#1788" class="Function">]</a> <a id="5199" href="SMT.Script.Base.html#9217" class="Datatype">Script</a> <a id="5206" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="5209" href="SMT.Script.Reflection.html#5195" class="Bound">Γ</a> <a id="5211" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="5213" class="Symbol">)</a>
  <a id="5217" href="SMT.Script.Reflection.html#5155" class="Function">reflectToScript</a> <a id="5233" href="SMT.Script.Reflection.html#5233" class="Bound">t</a> <a id="5235" class="Symbol">=</a> <a id="5237" class="Keyword">do</a>
    <a id="5244" class="Symbol">(</a><a id="5245" href="SMT.Script.Reflection.html#5245" class="Bound">Γᵣ</a> <a id="5248" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5250" href="SMT.Script.Reflection.html#5250" class="Bound">scrᵣ</a><a id="5254" class="Symbol">)</a> <a id="5256" href="Category.Monad.Indexed.html#677" class="Function Operator">←</a> <a id="5258" href="SMT.Theories.Raw.Reflection.html#5494" class="Function">reflectToRawScript</a> <a id="5277" href="SMT.Script.Reflection.html#5233" class="Bound">t</a>
    <a id="5283" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="5288" href="SMT.Script.Reflection.html#3834" class="Function">checkRawScript</a> <a id="5303" href="Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="5306" href="SMT.Script.Reflection.html#5250" class="Bound">scrᵣ</a> <a id="5311" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="5314" class="Symbol">λ</a> <a id="5316" class="Keyword">where</a>
      <a id="5328" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a> <a id="5336" class="Symbol">→</a> <a id="5338" href="Reflection.TypeChecking.Format.html#2592" class="Function">Rfl.typeErrorFmt</a> <a id="5355" class="String">&quot;Ill-typed script:\n%s&quot;</a> <a id="5379" class="Symbol">(</a><a id="5380" href="SMT.Theories.Raw.Base.html#3460" class="Function">showRawScript</a> <a id="5394" href="SMT.Script.Reflection.html#5250" class="Bound">scrᵣ</a><a id="5398" class="Symbol">)</a>
      <a id="5406" class="Symbol">(</a><a id="5407" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="5412" class="Symbol">(</a><a id="5413" href="SMT.Script.Reflection.html#5413" class="Bound">Γ</a> <a id="5415" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5417" href="Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="5420" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5422" href="SMT.Script.Reflection.html#5422" class="Bound">scr</a><a id="5425" class="Symbol">))</a> <a id="5428" class="Symbol">→</a> <a id="5430" href="Category.Monad.Indexed.html#644" class="Function">return</a> <a id="5437" class="Symbol">(</a><a id="5438" href="Data.Vec.Base.html#7399" class="Function">Vec.toList</a> <a id="5449" href="SMT.Script.Reflection.html#5413" class="Bound">Γ</a> <a id="5451" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5453" href="SMT.Script.Reflection.html#5422" class="Bound">scr</a><a id="5456" class="Symbol">)</a>
</pre></body></html>